(self.webpackChunklite=self.webpackChunklite||[]).push([[6983],{54803:(e,t,n)=>{"use strict";n.d(t,{gs:()=>m,_W:()=>g,AR:()=>p,wB:()=>y,T8:()=>x,Nx:()=>P,uT:()=>S,t$:()=>w,w9:()=>O,St:()=>R,th:()=>k,Cr:()=>A,oe:()=>D,J1:()=>C});var r=n(59713),o=n.n(r),i=n(63038),a=n.n(i),l=n(42348),s=n.n(l),c=n(7770),u=n(14391);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p,m=250,g=5;!function(e){e[e.Link=0]="Link"}(p||(p={}));var f=["numbered-list","bulleted-list","bq"];function h(e){if(!e.children)return[];if(e.children.every((function(e){return function(e){return c.xv.isText(e)||"link"===e.type}(e)}))){var t=c.NB.string(e),n=!(null==e?void 0:e.name),r=n?b():e.name,o=function(e){switch(e){case"oli":return 10;case"uli":return 9;case"bq-line":return 6;case"image":return 4;case"title":return 3;default:return 1}}(e.type);if("image"===e.type)return[{type:n?1:3,paragraph:{name:r,type:o,text:t,markups:[],layout:1,metadata:{id:e.imageProps.miroId,originalWidth:e.imageProps.width,originalHeight:e.imageProps.height}},verifySameName:!n}];if(!t.length&&!e.name)return[];if(!t.length&&e.name)return[{type:2,paragraph:{name:e.name}}];var i=e.children.reduce((function(e,t){var n=a()(e,2),r=n[0],o=n[1],i=c.NB.string(t).length;return t.italic&&o.push({type:2,start:r,end:r+i}),t.bold&&o.push({type:1,start:r,end:r+i}),"link"===t.type&&o.push({type:3,start:r,end:r+i,href:t.url,title:"",rel:"",anchorType:0}),[r+i,o]}),[0,[]]);return[{type:n?1:3,paragraph:{markups:a()(i,2)[1],name:r,text:t,type:o},verifySameName:!n}]}return s()(e.children.map(h).filter((function(e){return e.length})))}function v(e,t){return e.map((function(e,n){return e.index=n+t,e}))}var E=function(e){var t=[];return e.map((function(e){return t.includes(e.name)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{name:void 0}):(e.name&&t.push(e.name),e)}))};function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,r=[];if(n){var o=b();r=[{type:8,index:0,section:{name:o,startIndex:0}}]}var i=e.children,a=E(i);e.children=a;var l=0;if(!a[0].name&&"title"!==a[0].type){var s=b();r.push({type:1,index:0,paragraph:{name:s,type:3,text:"",markups:[]}}),l=1}var c=h(e),u=v(c,l);return r.concat(u)}function b(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")}var x=function(e,t){e.selection&&S(e,t)},P=function(e,t){var n=t||e.selection;c.YR.unwrapNodes(e,{match:function(e){return"link"===e.type},at:n})},S=function(e,t){(function(e){var t=c.ML.nodes(e,{match:function(e){return"link"===e.type}});return!!a()(t,1)[0]})(e)&&P(e);var n=e.selection,r=n&&c.e6.isCollapsed(n),o={type:"link",url:t,children:r?[{text:t}]:[]};r?c.YR.insertNodes(e,o):(c.YR.wrapNodes(e,o,{split:!0}),c.YR.collapse(e,{edge:"end"}))},w=function(e,t,n){var r=n||e.selection,o=c.ML.nodes(e,{match:function(e){return!0===e[t]||e.type===t},at:r,mode:"all"});return!!a()(o,1)[0]},O=function(e,t){w(e,t)?c.ML.removeMark(e,t):c.ML.addMark(e,t,!0)},I=function(e){switch(e){case"bq":return"bq-line";case"numbered-list":return"oli";case"bulleted-list":default:return"uli"}},R=function(){if("undefined"!=typeof window){var e=window.getSelection(),t=e&&!e.isCollapsed&&e.getRangeAt(0);return t&&t.getBoundingClientRect()}},k=function(e,t,n){var r=n||e.selection,o=w(e,t,n),i=f.includes(t),a=c.e6.isRange(r)?c.ML.rangeRef(e,r):c.E9.isPoint(r)?c.ML.pointRef(e,r):c.ML.pathRef(e,r);if(c.YR.unwrapNodes(e,{at:r,match:function(e){return f.includes(e.type)},split:!0}),a.current&&(c.YR.setNodes(e,{type:o?"paragraph":i?I(t):t},{at:a.current}),!o&&i)){var l={type:t,children:[]};c.YR.wrapNodes(e,l,{at:a.current})}},A=function(e,t){["bold","italic"].forEach((function(n){w(e,n,t)&&c.YR.unsetNodes(e,n,{at:t})})),["link","numbered-list","bulleted-list","bq"].forEach((function(n){w(e,n,t)&&c.YR.unwrapNodes(e,{at:t,match:function(e){return e.type===n}})}))},D=function(e){if(e){var t=function(e){if(!e||!e.children.length)return!1;var t=c.ML.point(e,[0],{edge:"start"}),n=e.children.length;return{anchor:t,focus:c.ML.point(e,[n-1],{edge:"end"})}}(e);t&&(c.YR.removeNodes(e,{at:t}),c.YR.insertNodes(e,{children:[{text:""}]}))}},C=function(e){return e.paragraphs.map((function(e){var t=e.markups,n=e.name,r=e.text;if(e.type===u.NJ.H3)return{children:[{text:r}],name:n,type:"title"};if(!(null==t?void 0:t.length))return{children:[{text:r}],name:n};var o=new Set;o.add(0),o.add(r.length),t.forEach((function(e){var t=e.start,n=e.end;o.add(t),o.add(n)}));var i=Array.from(o);return{children:i.sort((function(e,t){return e-t})).slice(1).map((function(e,n,o){var a=n?o[n-1]:i[0],l=e,s=t.filter((function(e){return e.start<=a&&l<=e.end})),c={text:r.substring(a,l)};return s.forEach((function(e){var t=e.href;switch(e.type){case u.Jh.STRONG:("link"===c.type?c.children[0]:c).bold=!0;break;case u.Jh.EM:("link"===c.type?c.children[0]:c).italic=!0;break;case u.Jh.A:c={type:"link",url:t,children:[c]}}})),c})),name:n}}))}},5399:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(28655),o=n.n(r);function i(){var e=o()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return i=function(){return e},e}var a=(0,n(71439).Ps)(i())},94132:(e,t,n)=>{"use strict";n.d(t,{T:()=>P});var r=n(59713),o=n.n(r),i=n(67294),a=n(70561),l=n(30351),s=n(66893),c=n(9785),u=n(82418),d=n(97145),p=n(79316),m=n(80735),g=n(28309),f=n(67122),h=n(27952);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=e.authDomain,n=e.productName;return i.createElement(p.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(p.xu,{paddingBottom:"8px"},i.createElement(p.rU,{href:(0,h.OA)(t)},i.createElement(m.X6,{scale:"S"},"Become a member"))),i.createElement(m.F,{scale:"M"},"Get unlimited access to the best stories on ".concat(n," — and support writers while you’re at it. Just $5/month. "),i.createElement(p.rU,{href:(0,h.OA)(t),inline:!0,linkStyle:"OBVIOUS"},"Upgrade")))}var b=function(e){var t=e.authDomain,n=e.productName;return i.createElement(p.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(p.xu,{paddingBottom:"8px"},i.createElement(p.rU,{href:(0,h.KL)(t,"members")},i.createElement(m.X6,{scale:"S"},"Explore your membership"))),i.createElement(m.F,{scale:"M"},"Thank you for being a member of ".concat(n,". You get unlimited access to insightful\n          stories from amazing thinkers and storytellers. "),i.createElement(p.rU,{href:(0,h.KL)(t,"members"),inline:!0,linkStyle:"OBVIOUS"},"Browse")))},x=function(e){var t=e.authDomain,n=e.productName;return i.createElement(p.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(p.xu,{paddingBottom:"8px"},i.createElement(p.rU,{href:(0,h.GM)(t,n)},i.createElement(m.X6,{scale:"S"},"Share your thinking."))),i.createElement(m.F,{scale:"M"},"If you have a story to tell, knowledge to share, or a perspective to offer — welcome home.\n        It’s easy and free to post your thinking on any topic. ",i.createElement(p.rU,{href:(0,h.GM)(t,n),inline:!0,linkStyle:"OBVIOUS"},"Write on ".concat(n))))},P=function(e){var t=e.slimFooter,n=(0,a.v9)((function(e){return{authDomain:e.config.authDomain,productName:e.config.productName}}),a.wU),r=n.authDomain,o=n.productName,v=!!(0,s.P5)("enable_footer_app_buttons"),P=!!(0,s.P5)("enable_unbound"),S=(0,g.Fg)(),w=(0,c.YC)().value,O=E({},S,{baseColor:E({},S.baseColor,{background:{light:f.Uy(.76),normal:f.Uy(.84),dark:f.Uy(.9)},border:{lighter:f.l9(.1),light:f.l9(.2),normal:f.l9(.34),dark:f.l9(.54),darker:f.l9(.84)},fill:{lighter:f.l9(.7),light:f.l9(.8),normal:f.l9(.98),dark:f.l9(.99),darker:f.l9(1)},text:{lighter:f.l9(.7),light:f.l9(.8),normal:f.l9(.98),dark:f.l9(.99),darker:f.l9(1)}})});return i.createElement(p.f6,{theme:O},i.createElement(p.xu,{backgroundColor:"BASE_DARK",padding:"".concat(t?"32px":"60px"," 0"),sm:{padding:"32px 0"}},i.createElement(p.Pm,null,t?null:i.createElement(p.xu,{borderBottom:"BASE_DARK",display:"flex",justifyContent:"space-between",marginBottom:"32px",paddingBottom:"48px",sm:{display:"none"}},i.createElement(p.xu,{display:"flex",justifyContent:"space-between",margin:"0 -12px"},i.createElement(p.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(p.xu,{paddingBottom:"8px"},i.createElement(p.rU,{href:(0,h.jQ)({authDomain:r,autoplay:!0})},i.createElement(m.X6,{scale:"S"},P?"Learn more.":"Discover ".concat(o)))),i.createElement(m.F,{scale:"M"},P?"".concat(o," is an open platform where 170 million readers come to find insightful and dynamic thinking.\n                        Here, expert and undiscovered voices alike dive into the heart of any topic and bring new ideas to the surface. "):"Welcome to a place where words matter. On ".concat(o,", smart voices and\n                        original ideas take center stage - with no ads in sight. "),i.createElement(p.rU,{href:(0,h.jQ)({authDomain:r,autoplay:!0}),inline:!0,linkStyle:"OBVIOUS"},P?"Learn more":"Watch"))),i.createElement(p.xu,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},i.createElement(p.xu,{paddingBottom:"8px"},i.createElement(p.rU,{href:(0,h.a4)(r)},i.createElement(m.X6,{scale:"S"},"Make ",o," yours",P&&"."))),i.createElement(m.F,{scale:"M"},P?"Follow the writers, publications, and topics that matter to you, and you’ll see them on your homepage and in your inbox. ":"Follow all the topics you care about, and we’ll deliver the best stories for you to your homepage and inbox. ",i.createElement(p.rU,{href:(0,h.a4)(r),inline:!0,linkStyle:"OBVIOUS"},"Explore"))),P?i.createElement(x,{authDomain:r,productName:o}):w&&w.mediumMemberAt?i.createElement(b,{authDomain:r,productName:o}):i.createElement(y,{authDomain:r,productName:o}))),i.createElement(p.xu,{display:"flex",flexDirection:"column"},i.createElement(p.xu,{alignItems:"center",display:"flex",justifyContent:"space-between"},i.createElement(p.rU,{href:"https://".concat(r,"/"),ariaLabel:"Go to homepage"},i.createElement(l.Rv,{fill:f.ix})),i.createElement(m.F,{scale:"M"},i.createElement(p.xu,{display:"flex",justifyContent:"space-between",paddingTop:"8px",width:"200px",sm:{display:"flex",width:"140px"}},i.createElement(m.F,{color:"DARKER",scale:"L"},i.createElement(p.rU,{href:(0,h.jQ)({authDomain:r}),inline:!0},"About")),i.createElement(m.F,{color:"DARKER",scale:"L"},i.createElement(p.rU,{href:(0,h.Xp)(),inline:!0},"Help")),i.createElement(m.F,{color:"DARKER",scale:"L"},i.createElement(p.rU,{href:(0,h.xB)(),inline:!0},"Legal"))))),v&&i.createElement(i.Fragment,null,i.createElement(p.xu,{display:"none",sm:{display:"flex",marginBottom:"16px",marginTop:"30px"}},i.createElement(m.F,{color:"LIGHTER",scale:"L"},"Get the Medium app")),i.createElement(p.xu,{display:"none",sm:{display:"flex",flexDirection:"row",marginBottom:"16px",width:"100%"}},i.createElement(p.xu,{marginRight:"16px"},i.createElement(d.E,{entryPoint:"postPageFooter"})),i.createElement(p.xu,null,i.createElement(u.H,{entryPoint:"postPageFooter"}))))))))}},31933:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var r=n(67294),o=n(79316),i=n(67122),a=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement(o.xu,{marginTop:"-240px",background:"linear-gradient(".concat((0,i.l9)(0),",\n        ").concat((0,i.l9)(.5),",\n        ").concat((0,i.l9)(1),")"),height:"250px",position:"relative",width:"100%"}),r.createElement(o.xu,{backgroundColor:"BACKGROUND"},r.createElement(o.xu,{margin:"auto",maxWidth:"760px",sm:{margin:"0 18px 0"}},t)))}},4995:(e,t,n)=>{"use strict";n.d(t,{P:()=>j,F:()=>C});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),l=n(70561),s=n(31933),c=n(51562),u=n(66893),d=n(9785),p=n(89714),m=n(37258),g=n(19608),f=n(27168),h=n(48881),v=n(62876),E=n(79316),y=n(80735),b=n(62240),x=n(62630),P=n(27572),S=n(96907),w=n(33572),O=n(88914),I=n(27952);function R(){var e=o()(["\n  fragment PayWall_post on Post {\n    id\n  }\n"]);return R=function(){return e},e}var k=function(e){var t=e.optimizelyFeatureString,n=e.post,r=e.viewer,o=e.showTrialPaywall,i=e.authDomain,l=!!(0,u.P5)("enable_lite_pay_page"),s=!!(0,u.P5)("enable_new_checkout_flow");return a.createElement(P.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:n.id}},a.createElement(S.M,null,a.createElement(E.xu,{display:"inline-block",textAlign:"center"},a.createElement(c.W,{featureString:t,target:o?"trial-upsell-button":"upsell-button-".concat(r&&r.hasPastMemberships?"resume-membership":"upgrade")},a.createElement(v.a,{isButton:!0,buttonStyle:o?"BRAND":"STRONG",width:o||r&&r.hasPastMemberships?"182px":"104px",redirectUrl:l&&(o||s)?(0,I.c5)(i):(0,I.KP)(i)},o?"Start your free trial":r&&r.hasPastMemberships?"Resume membership":"Upgrade")))))},A=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=(0,l.I0)();return a.createElement(P.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},a.createElement(E.xu,{display:"flex",sm:{flexDirection:"column"}},a.createElement(E.xu,{display:"flex",flexDirection:"row",justifyContent:"center"},n.facebook||n.google||n.twitter?a.createElement(g.r,{userSocialLogins:n}):a.createElement(m.o,{onSuccess:function(){return r((0,O.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:n.userId},(function(e){var t=e.handleSubmit;return a.createElement(E.zx,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")})))),t&&a.createElement(E.xu,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},a.createElement(b.F,{scale:"M"},a.createElement(f.G,{declineSuggestedAccount:t,isSocial:!!n&&!!(n.facebook||n.google||n.twitter)}))))},D=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=e.suggestedAccountEventData,o=e.showSuggestedAccount,i=e.postId;return a.createElement(P.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:i}},a.createElement(S.M,{eventData:r},a.createElement(E.xu,{display:"inline-block",textAlign:"center"},a.createElement(A,{declineSuggestedAccount:t,showSuggestedAccount:o,userSocialLogins:n}),a.createElement(E.xu,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},a.createElement(b.F,{scale:"L"},a.createElement(v.a,{eventData:r,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},C=function(e){var t=e.post,n=(0,l.v9)((function(e){return{sessionUserId:e.session.user.id,authDomain:e.config.authDomain,productName:e.config.productName}}),l.wU),r=n.productName,o=n.sessionUserId,i=n.authDomain,m=(0,d.YC)().value,g=(0,x.Av)(),f=null==m?void 0:m.isMembershipTrialEligible,v=!(!(0,u.P5)("enable_trial_upsell")||!f),P=!!(0,u.P5)("enable_unbound");a.useEffect((function(){f&&g.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var S="paywall";return a.createElement(p.N8,null,a.createElement(s.F,null,a.createElement(h.o,{postRenderCallback:function(){}},(function(e){var n,l=e.loading,s=e.showSuggestedAccount,u=e.declineSuggestedAccount,d=e.userSocialLogins;return l?a.createElement(a.Fragment,null):(s&&(S="suggested-account-paywall"),s&&(n={alternateUserSuggestionShown:s,alternateUserSuggestionAccountType:(0,w.S)(d),alternateUserSuggestionTargetUserId:!!d&&d.userId,alternateUserSuggestionSourceUserId:m?m.id:o}),a.createElement(a.Fragment,null,a.createElement(c.W,{featureString:S,target:v?"trial-background-color":"background-color"},a.createElement(E.xu,{display:"flex",minHeight:"350px",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},a.createElement(E.xu,{display:"flex",flexDirection:"column",padding:"48px 50px",sm:{padding:"28px 16px 32px",textAlign:"center"}},a.createElement(c.W,{featureString:S,target:v?"webCCTrialHeading":"fewerClicksHeading"},a.createElement(y.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,t,n){var r=n.enableUnbound,o=n.showSuggestedAccount,i=n.showTrialPaywall,l=t?(0,w.J)(t):null;return l=l&&l.length<=13?l:null,o?"Switch to your member account for unlimited reading.":i?a.createElement(E.xu,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},l?"".concat(l,", keep reading."):"Keep reading."):r?a.createElement(E.xu,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},"How to read this story — and everything else on ",e,"."):a.createElement(E.xu,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},l?"".concat(l,", get unlimited access."):"Get unlimited access.")}(r,m&&m.name,{enableUnbound:P,showSuggestedAccount:s,showTrialPaywall:v}))),a.createElement(b.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},!s&&!v&&a.createElement(a.Fragment,null,a.createElement(c.W,{featureString:S,target:"second-header-fewer-clicks"},a.createElement(E.xu,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},P?"Not every story on ".concat(r," is free, like this one. Become a member to get unlimited access and support the voices you want to hear more from."):"You've read all of your free stories this month. Become a member to keep reading.")),a.createElement(E.xu,{display:"flex",justifyContent:"flex-start",sm:{justifyContent:"center"}},a.createElement(k,{optimizelyFeatureString:S,post:t,viewer:m,showTrialPaywall:v,authDomain:i}))),a.createElement(c.W,{featureString:S,target:v?"subtitle-copy-web-cc-trial":"subtitle-copy-fewer-clicks"},a.createElement(E.xu,{marginTop:s?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,t,n,r){var o=n.enableUnbound,i=n.showTrialPaywall;if(n.showSuggestedAccount&&t){var l=t.isMember,s=t.redactedEmailAddress;return a.createElement(a.Fragment,null,"Looks like you're coming from the ",l&&"member ","account"," ",a.createElement("b",null,s)," but you’re signed in as ",a.createElement("b",null,null==r?void 0:r.email),". Switch to your",l?" member account for unlimited access":" account",".")}return o?a.createElement(E.xu,{marginTop:"28px",marginBottom:"28px",textAlign:i?"center":"left"},i?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):a.createElement(a.Fragment,null,a.createElement("b",null,"Read any story. "),"Access everything on ",e," across all your devices with no limits or ads.",a.createElement("br",null),a.createElement("br",null),a.createElement("b",null,"Reward great writing. "),"A portion of your membership fee will go toward the writers you read most.")):i?a.createElement(E.xu,{marginTop:"28px",marginBottom:"28px"},"You’ve reached your limit of free member-only stories this month. Get unlimited access to every idea on ",e,", free for 1 month. If it's not for you, cancel anytime."):a.createElement(E.xu,{marginTop:"28px",marginBottom:"28px",textAlign:"left"},"Here's what you get when you upgrade to membership:",a.createElement(E.xu,{marginTop:"28px",marginBottom:"28px"},a.createElement("b",null,"Unlimited access. ")," Explore ",e,"'s library filled with everything you're curious about."),a.createElement(E.xu,{marginBottom:"28px"},a.createElement("b",null,"Reward quality writing.")," When you spend time reading a story, a portion of your membership fee will go directly to its author."),a.createElement(E.xu,{marginBottom:"28px"},'"I love ',e,"'s membership — it gives me access to the stories I love by the writers I love, and it allows me to help support those writers financially.\"",a.createElement("br",null)," ",a.createElement("b",null,"—Kayt Molina, ",e," member ")))}(r,d,{enableUnbound:P,showSuggestedAccount:s,showTrialPaywall:v},m)))),!!s&&d&&a.createElement(D,{declineSuggestedAccount:u,userSocialLogins:d,suggestedAccountEventData:n,showSuggestedAccount:s,postId:t.id}),v&&!s&&a.createElement(k,{optimizelyFeatureString:S,post:t,viewer:m,showTrialPaywall:v,authDomain:i}))))))}))))},j=(0,i.Ps)(R())},86987:(e,t,n)=>{"use strict";n.d(t,{Mt:()=>R,E7:()=>k,VP:()=>A});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),l=n(6401),s=n(31933),c=n(51562),u=n(66893),d=n(89714),p=n(62181),m=n(5731),g=n(59317),f=n(81405),h=n(90174),v=n(4134),E=n(79316),y=n(80735),b=n(62630),x=n(27572),P=n(37581);function S(){var e=o()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return S=function(){return e},e}function w(){var e=o()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return w=function(){return e},e}var O="post_regwall",I=function(e){var t=e.enableNewSusiModal,n=e.meterCount,r=e.optimizelyFeatureString,o=e.postId,i={operation:"register"},l=(0,g.j)().openModal;return a.createElement(E.xu,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},a.createElement(c.W,{featureString:r,target:"google-button"},a.createElement(E.xu,{margin:"".concat(t?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},a.createElement(P.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},a.createElement(v.x,i)))),a.createElement((function(e){var n=e.children;return t?a.createElement(c.W,{featureString:r,target:"google-button"},n):n}),null,a.createElement(E.xu,{marginBottom:t?"32px":"52px",sm:{marginBottom:"40px"}},a.createElement(P.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},t?a.createElement(f.R,{goToEmailAuthStep:function(){l({step:"ENTER_EMAIL",susiEntry:O,operation:"register"})},operation:"register"}):a.createElement(h.q,i)))))},R=function(e){var t=e.meteringInfo,n=e.post,r=(0,b.Av)(),o=!!(0,u.P5)("enable_new_susi_modal"),i="LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource,g="".concat(i?"syndicated-":"","regwall");return a.useEffect((function(){r.event("meter.viewed",{meterCount:null==t?void 0:t.postIds.length,postId:n.id,uiType:i?m.j.SyndicatedRegwall:m.j.RegWall})}),[]),a.createElement(d.N8,null,a.createElement(x.cW,{source:{postId:n.id,susiEntry:O}},a.createElement(s.F,null,a.createElement(c.W,{featureString:g,target:"background-color"},a.createElement(E.xu,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},a.createElement(E.xu,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},a.createElement(c.W,{featureString:g,target:"heading"},a.createElement(y.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},a.createElement(E.xu,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),a.createElement(E.xu,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account."))),a.createElement(y.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},a.createElement(E.xu,{display:"block",margin:"auto",paddingTop:"10px",sm:{display:"none"},width:"500px"},"You’ll also discover more fresh thinking personalized to your interests and can follow your favorite authors, publications, and topics."),a.createElement(E.xu,{display:"none",sm:{display:"block"}},a.createElement(E.xu,{margin:"".concat(o?"40px":"42px"," 0")},a.createElement(l.a,{isButton:!0,postId:n.id,appEntry:"regwall"})),a.createElement(c.W,{featureString:g,target:"skip-app-copy"},a.createElement(E.xu,{marginBottom:"-20px"},"Or, continue in mobile web"))),a.createElement(I,{meterCount:null==t?void 0:t.postIds.length,optimizelyFeatureString:g,postId:n.id,enableNewSusiModal:o}),o?a.createElement(c.W,{featureString:g,target:"sign-in-link",tag:"span"},a.createElement(p.R9,{linkStyle:"OBVIOUS",operation:"login",post:n,susiEntry:O},"More sign in options")):a.createElement(a.Fragment,null,a.createElement(c.W,{featureString:g,target:"sign-in-copy",tag:"span"},"Already have an account?"," "),a.createElement(c.W,{featureString:g,target:"sign-in-link",tag:"span"},a.createElement(p.R9,{linkStyle:"OBVIOUS",operation:"login",post:n,susiEntry:O},"Sign in"))))))))))},k=(0,i.Ps)(w(),p.qU),A=(0,i.Ps)(S())},47578:(e,t,n)=>{"use strict";n.d(t,{Vy:()=>r,KQ:()=>c,VT:()=>u,ne:()=>d});var r,o=n(28655),i=n.n(o),a=n(71439);function l(){var e=i()(["\n  fragment optimizelyData_post on Post {\n    creator {\n      name\n    }\n    collection {\n      name\n    }\n    primaryTopic {\n      name\n    }\n  }\n"]);return l=function(){return e},e}!function(e){e.TopicSelected="TopicSelected",e.UserConvertedToTrialMember="UserConvertedToTrialMember"}(r||(r={}));var s=function(){return"undefined"!=typeof window},c=function(e,t,n){var r=e.post;if(s()){s()&&(window.optimizelyDataObject={});var o=r||{},i=o.creator,a=o.collection,l=o.primaryTopic;i&&i.name&&(window.optimizelyDataObject.author=i.name),a&&a.name&&(window.optimizelyDataObject.publication=a.name),l&&l.name&&(window.optimizelyDataObject.topic=l.name),t&&(window.optimizelyDataObject.firstName=t),n&&(window.optimizelyDataObject.trialRenewalDate=n)}},u=function(e){s()&&void 0!==window.optimizely&&window.optimizely.push({type:"event",eventName:e})},d=(0,a.Ps)(l())},12390:(e,t,n)=>{"use strict";n.d(t,{h:()=>p,P:()=>m});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),l=n(70561),s=n(42963),c=n(24087),u=n(27952);function d(){var e=o()(["\n  fragment MaybeRedirectToEditor_post on Post {\n    id\n    isPublished\n    collection {\n      id\n      viewerCanEditOwnPosts\n      viewerCanEditPosts\n      viewerIsEditor\n    }\n    creator {\n      id\n    }\n  }\n"]);return d=function(){return e},e}var p=(0,i.Ps)(d()),m=(0,l.$j)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var t=e.authDomain,n=e.post,r=e.children;return a.createElement(c.Z,null,(function(e){return function(e,t){var n=e.collection,r=e.creator&&t&&e.creator.id===t.id,o=r&&n&&n.viewerCanEditOwnPosts||n&&(n.viewerIsEditor||n.viewerCanEditPosts);return(!e||!e.isPublished)&&(n?o:r)}(n,e)?a.createElement(s.Z,{to:(0,u.d0)(t,n.id)}):r}))}))},47921:(e,t,n)=>{"use strict";n.d(t,{i:()=>M,Z:()=>B});var r=n(28655),o=n.n(r),i=n(59713),a=n.n(i),l=n(71439),s=n(67294),c=n(70405),u=n(70561),d=n(319),p=n.n(d),m=n(82492),g=n.n(m),f=n(68254),h=n.n(f),v=n(90038),E=n(96879),y=n(22744),b=n(27952);function x(){var e=o()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      hasDomain\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    tags {\n      displayTitle\n    }\n    topics {\n      name\n      slug\n    }\n    sequence {\n      slug\n    }\n    lockedSource\n    layerCake\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n"]);return x=function(){return e},e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w="Topic";function O(e){var t=e.id,n=e.originalWidth,r=e.originalHeight;if(!t||!n||!r)return null;var o=Math.min(r,60),i=o/r,a=Math.floor(n*i);return I({width:a,height:o,url:(0,v.W6)({miroId:t,width:a,freezeGifs:!0,strategy:v._S.Resample})})}function I(e){return S({"@type":"ImageObject"},e)}function R(e,t){return"".concat(e,":").concat(t)}const k=(0,u.$j)((function(e){var t=e.config,n=t.productName,r=t.defaultImages,o=t.collectionStructuredData,i=e.navigation;return{currentLocation:i.currentLocation,host:i.host,productName:n,defaultImages:r,collectionStructuredData:o}}))((function(e){var t=e.currentLocation,n=e.host,r=e.post,o=e.postDescription,i=e.productName,a=e.defaultImages,l=e.collectionStructuredData,u=r.collection,d=r.creator,m=r.id,f=r.mediumUrl,x=r.isLocked,P=r.previewImage,k=r.firstPublishedAt,A=r.updatedAt,D=r.tags,C=r.topics,j=r.sequence,T=r.lockedSource,_=r.layerCake,B=r.structuredData,M=(0,y._t)(r,i),U={id:a.postLogo.imageId,originalWidth:a.postLogo.width,originalHeight:a.postLogo.height},L={id:a.orgLogo.imageId,originalWidth:a.orgLogo.width,originalHeight:a.orgLogo.height},N=u?{"@type":"Organization",name:u.name,url:u.domain||(0,E.l1)(n,(0,b.WG)(u,t)),logo:function(e){if(!e||!e.logo||!e.logo.id)return O(L);var t=O(e.logo);return t&&60===t.height&&t.width<=600?t:O(L)}(u)}:{"@type":"Organization",name:i,url:(0,E.l1)(n,"/"),logo:O(L)};u&&l&&l[u.id]&&g()(N,l[u.id].data);var F=[R("Lite","true")];D&&D.forEach((function(e){e.displayTitle&&F.push(R("Tag",e.displayTitle))})),C&&C.forEach((function(e){e.name?F.push(R(w,e.name)):e.slug&&F.push(R(w,e.slug))})),u&&u.slug&&F.push(R("Publication",u.slug)),F.push(R("Elevated",(!!j).toString())),j&&j.slug&&F.push(R("Sequence",j.slug)),T&&F.push(R("LockedPostSource",T)),null!=_&&F.push(R("LayerCake",_.toString()));var W=o||"",H=x?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},V={"@context":"http://schema.org"},Y=S({"@type":"NewsArticle",image:P&&P.id?function(e){var t=e.id,n=e.originalWidth,r=e.originalHeight,o=e.focusPercentX,i=e.focusPercentY;if(!t)return null;var a=1200,l=(0,v.vz)({miroId:t,aspectRatio:16/9,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),s=(0,v.vz)({miroId:t,aspectRatio:4/3,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),c=(0,v.vz)({miroId:t,aspectRatio:1,croppedWidth:a,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),u=new Set([l,s,c]);return Array.from(u)}(P):I({url:(0,v.W6)({miroId:U.id,width:U.originalWidth}),height:U.originalHeight,width:U.originalWidth}),url:f,dateCreated:k&&new Date(k).toISOString(),datePublished:k&&new Date(k).toISOString(),dateModified:A&&new Date(A).toISOString(),headline:M,name:M,description:W,identifier:m,keywords:F.length?F:null,author:d&&d.name&&d.username?{"@type":"Person",name:d.name||d.username,url:(0,b.AW)(d.username,n,d.hasDomain)}:null,creator:d&&[d.name],publisher:N,mainEntityOfPage:f},H),Q=S({},V,{},Y);if(B&&B.length>0)try{var q=JSON.parse(B);if(q&&(null==q?void 0:q["@graph"])&&(null==q?void 0:q["@graph"].length)>0){var $=((null==q?void 0:q["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));$&&$.length>0&&(Q=S({},V,{"@graph":[Y].concat(p()($))}))}}catch(e){}return s.createElement(c.q,null,s.createElement("script",{type:"application/ld+json"},h()(Q,{isJSON:!0})))}));var A=(0,l.Ps)(x(),y.bq),D=n(66893),C=n(27390),j=n(71794);function T(){var e=o()(["\n  fragment PostMetadata_post on Post {\n    id\n    socialTitle\n    socialDek\n    canonicalUrl\n    mediumUrl\n    metaDescription\n    latestPublishedAt\n    visibility\n    isLimitedState\n    readingTime\n    creator {\n      name\n      username\n      twitterScreenName\n      hasDomain\n    }\n    collection {\n      ampEnabled\n      twitterUsername\n      facebookPageId\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalHeight\n      originalWidth\n    }\n    isShortform\n    ...PostJsonLd_post\n    ...postMetaDescription_post\n    ...shortformPostMetaDescription_post\n    ...shouldIndex_post\n    ...shortformPostTitle_post\n    ...getTitleDetails_post\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return T=function(){return e},e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const B=(0,u.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var t,n,r=e.isAmp,o=e.host,i=e.authDomain,l=e.productName,u=e.post,d=u.canonicalUrl,p=u.collection,m=u.creator,g=u.id,f=u.latestPublishedAt,h=u.mediumUrl,E=u.previewContent,x=u.socialTitle,P=u.socialDek,S=u.visibility,w=u.isShortform,O=!!(0,D.P5)("default_seo_post_titles"),I=p&&p.ampEnabled,R=m&&m.name,A=(0,y.yB)(u),T=u.title||"",B=A.latestTitle||T;if(w){var M=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{title:B});t=(0,y.oS)(M,l,A.hasTitleGraf).trim(),n=(0,j.OO)(u,A.hasTitleGraf)}else t=(0,y._t)(u,l,A,O).trim(),n=(0,j.j7)(u);var U,L,N=P||E&&E.subtitle||n;if(u&&u.previewImage&&u.previewImage.id&&!u.isLimitedState){var F=u.previewImage;U=(0,v.vz)({miroId:F.id,aspectRatio:1.9,croppedWidth:F.originalWidth?Math.min(F.originalWidth,1200):1200,originalWidth:F.originalWidth,originalHeight:F.originalHeight,focusPercentX:F.focusPercentX,focusPercentY:F.focusPercentY})}else if(u.isLimitedState){var W={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};U=(0,v.vz)({miroId:W.id,aspectRatio:1.9,croppedWidth:W.originalWidth?Math.min(W.originalWidth,1200):1200,originalWidth:W.originalWidth,originalHeight:W.originalHeight,focusPercentX:W.focusPercentX,focusPercentY:W.focusPercentY})}m&&m.username&&(L=(0,b.AW)(m.username,i,m.hasDomain));var H=(0,b.CK)(g),V=!(0,y.ao)(u),Y=f&&new Date(f).toISOString(),Q=(0,C.Vd)(u.readingTime||0),q=m&&m.twitterScreenName,$=p&&p.twitterUsername||"Medium",z=p&&p.facebookPageId,G=x||T||B;u.isLimitedState&&(G="");var K=u.isLimitedState?"":N,Z=s.useMemo((function(){return s.createElement(c.q,{htmlAttributes:r?{amp:void 0}:{}},s.createElement("meta",{property:"og:type",content:"article"}),Y&&s.createElement("meta",{property:"article:published_time",content:Y}),I&&!r?s.createElement("link",{rel:"amphtml",href:(0,b.Vc)(o,g)}):null,s.createElement("title",null,t),s.createElement("meta",{name:"title",content:t}),s.createElement("meta",{property:"og:title",content:G}),s.createElement("meta",{property:"twitter:title",content:G}),z&&s.createElement("meta",{property:"fb:pages",content:z}),s.createElement("meta",{name:"twitter:site",content:"@".concat($)}),s.createElement("meta",{name:"twitter:app:url:iphone",content:H}),s.createElement("meta",{property:"al:android:url",content:H}),s.createElement("meta",{property:"al:ios:url",content:H}),s.createElement("meta",{property:"al:android:app_name",content:"Medium"}),n&&s.createElement("meta",{name:"description",content:n}),N&&s.createElement("meta",{property:"og:description",content:K}),N&&s.createElement("meta",{property:"twitter:description",content:K}),s.createElement("meta",{property:"og:url",content:h}),s.createElement("meta",{property:"al:web:url",content:h}),U&&s.createElement("meta",{property:"og:image",content:U}),U&&s.createElement("meta",{name:"twitter:image:src",content:U}),s.createElement("meta",{name:"twitter:card",content:U?"summary_large_image":"summary"}),L&&s.createElement("meta",{property:"article:author",content:L}),L&&s.createElement("link",{rel:"author",href:L}),q&&s.createElement("meta",{name:"twitter:creator",content:"@".concat(q)}),R&&s.createElement("meta",{name:"author",content:R}),s.createElement("link",{rel:"canonical",href:d||h}),s.createElement("link",{rel:"alternate",href:(0,b.zi)((0,b.o2)("medium.com",u.id))}),s.createElement("meta",{name:"robots",content:"".concat(V?"noindex":"index",",follow,max-image-preview:large")}),s.createElement("meta",{name:"referrer",content:"UNLISTED"!==S?"unsafe-url":"origin"}),r?null:s.createElement("meta",{name:"twitter:label1",value:"Reading time"}),r?null:s.createElement("meta",{name:"twitter:data1",value:"".concat(Q," min read")}),s.createElement("meta",{name:"parsely-post-id",content:g}))}),[r,t,d,h,U,I,g,x,n,L,R,q,H,V,Y]);return s.createElement(s.Fragment,null,Z,s.createElement(k,{post:u,postDescription:n}))}));var M=(0,l.Ps)(T(),A,j.iI,j.m3,y.p3,y.Pz,y.dm,y.bq)},53099:(e,t,n)=>{"use strict";n.d(t,{yx:()=>D,KR:()=>C});var r=n(63038),o=n.n(r),i=n(28655),a=n.n(i),l=n(71439),s=n(80439),c=n(67294),u=n(70561),d=n(24087),p=n(46572),m=n(79316),g=n(80735),f=n(36808),h=n(14391),v=n(67122),E=n(76579),y=n(96879),b=n(27952);function x(){var e=a()(["\n  fragment PostPublishedDialog_prerequisite_post on Post {\n    id\n    creator {\n      id\n    }\n    collection {\n      id\n      viewerIsEditor\n    }\n    creatorPartnerProgramEnrollmentStatus\n  }\n"]);return x=function(){return e},e}function P(){var e=a()(["\n  query PostPublishedDialogQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...PostPublishedDialog_post\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function S(){var e=a()(["\n  fragment PostPublishedDialog_post on Post {\n    id\n    inResponseToPostResult {\n      __typename\n    }\n    visibility\n    curationEligibleAt\n    mediumUrl\n    shareKey\n    ...ShareButton_post\n    creatorPartnerProgramEnrollmentStatus\n    isEmail\n  }\n  ","\n"]);return S=function(){return e},e}var w=function(){return c.createElement(m.xu,null,c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:(0,b.Sc)()},"Learn more")," ","about what happens to your post when you publish.")};var O=(0,l.Ps)(S(),p.M),I=(0,l.Ps)(P(),O),R=function(e){var t=e.url,n=e.label;return c.createElement(E.b,{url:t},(function(e){return c.createElement(m.xu,{marginBottom:"8px"},c.createElement(m.zx,{buttonStyle:"SOCIAL",size:"REGULAR",width:"212px",onClick:function(e){return e}},c.createElement(m.xu,{display:"flex",alignItems:"center",justifyContent:"center"},e?"Copied!":n)))}))},k=function(e){var t=e.post,n=e.isUnlisted,r=e.postPath;return c.createElement(m.xu,{display:"flex",flexDirection:"column",alignItems:"center"},c.createElement(g.F,{color:"DARKER",scale:"L",tag:"p"},function(e){return e?"Share your story outside Medium.":"Share your story with the world."}(n)),c.createElement(m.xu,{marginTop:"20px"},!n&&c.createElement(c.Fragment,null,c.createElement(m.xu,{marginBottom:"8px"},c.createElement(p.T,{socialPlatform:"FACEBOOK",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(m.xu,{marginBottom:"8px"},c.createElement(p.T,{socialPlatform:"TWITTER",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(m.xu,{marginBottom:"8px"},c.createElement(p.T,{socialPlatform:"LINKEDIN",buttonStyle:"BUTTON_BRANDED",post:t}))),c.createElement(R,{url:r,label:"Copy story link"})))},A=function(e){var t=e.isVisible,n=e.hide,r=e.post,o=r.id,i=r.visibility,a=r.curationEligibleAt,l=r.mediumUrl,s=r.shareKey,d=r.creatorPartnerProgramEnrollmentStatus,p=r.isEmail,f="UNLISTED"===i,E=!!a,x=d===h.iR.ENROLLED,P=p?"Your newsletter is on its way!":"Your story is published!",S=(0,u.v9)((function(e){return e.config.productName}));return c.createElement(m.Vq,{isVisible:t,hide:n,withAnimation:!0,withCloseButton:!1},c.createElement(m.xu,{background:v.ix,borderRadius:"4px",boxShadow:"0 2px 10px ".concat((0,v.Uy)(.15)),position:"relative",width:"900px",textAlign:"center",md:{width:"600px"},sm:{width:"calc(100vw - 128px)"}},c.createElement(m.PZ,{onClick:n,size:"LARGE"}),c.createElement(m.xu,{padding:"56px",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"485px"},c.createElement(m.xu,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},c.createElement(g.F1,{scale:"L",tag:"h3"},P),c.createElement(m.xu,{maxWidth:"520px",marginTop:"20px"},c.createElement(g.F,{color:"DARKER",scale:"L",tag:"p"},function(e,t,n,r,o){return r?function(e,t){return e?"Your email will be delivered to your newsletter subscribers and editors, but will not appear publicly on ".concat(t,"."):c.createElement(c.Fragment,null,"Your subscribers and editors should have it soon. It’ll also show up on ",t," readers’ homepages and Digest emails depending on their interests."," ",c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:"https://help.medium.com/hc/en-us/articles/115004682167-How-to-use-Newsletters"},"Learn more"))}(e,o):e?"Your unlisted story will not appear publicly on ".concat(o,", but you can still share it."):n?t?c.createElement(c.Fragment,null,"As a member of the Partner Program, you’ve chosen to make this story eligible to earn money. It will be part of ",o,"’s metered paywall.",c.createElement(w,null)):c.createElement(c.Fragment,null,"You did not choose to make this story eligible to earn money. It will not be part of"," ",o,"’s metered paywall.",c.createElement(w,null)):c.createElement(c.Fragment,null,"This story isn’t currently eligible to earn money. To make this story eligible, join the"," ",o," Partner Program."," ",c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:"https://medium.com/earn"},"Learn more."))}(f,E,x,p,S))),c.createElement(m.xu,{paddingTop:"20px"},E&&!f&&l&&s&&c.createElement(R,{url:(0,y.Rk)((0,b.jV)(r),{sk:s}),label:"Copy Friend Link"})),c.createElement(m.xu,{borderBottom:"BASE_LIGHTER",width:"100%",margin:"20px 0"})),o&&l&&c.createElement(k,{post:r,isUnlisted:f,postPath:(0,b.jV)(r)}))))},D=function(e){var t=e.post,n=c.useState(!1),r=o()(n,2),i=r[0],a=r[1];return i?c.createElement(d.Z,null,(function(n){return n&&n.id&&(n.id===(t.creator&&t.creator.id)||t.collection&&t.collection.viewerIsEditor)?c.createElement(s.AE,{ssr:!1,query:I,variables:{postId:t.id}},(function(t){var n=t.loading,r=t.data,o=(r=void 0===r?{}:r).post;if(n||!o||o.inResponseToPostResult)return null;var i={isVisible:e.isVisible,hide:e.hide,post:o};return c.createElement(A,i)})):null})):(f.V6.on("load",(function(){return a(!0)})),null)},C=(0,l.Ps)(x())},15789:(e,t,n)=>{"use strict";n.d(t,{X4:()=>C,Uw:()=>D,ZP:()=>T});var r=n(67154),o=n.n(r),i=n(59713),a=n.n(i),l=n(28655),s=n.n(l),c=n(71439),u=n(80439),d=n(67294),p=n(25415),m=n(93227),g=n(69677),f=n(72846),h=n(91442),v=n(11642);function E(){var e=s()(["\n  fragment NormalizeHighlights_paragraph on Paragraph {\n    name\n    text\n  }\n"]);return E=function(){return e},e}function y(){var e=s()(["\n  fragment NormalizeHighlights_highlight on Quote {\n    endOffset\n    startOffset\n    paragraphs {\n      name\n      text\n    }\n  }\n"]);return y=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e,t,n){if(!e||"number"!=typeof t||"number"!=typeof n)return null;var r=t,o=n;return e.substr(r,o-r)}var P=(0,c.Ps)(y()),S=(0,c.Ps)(E()),w=n(24087);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(){var e=s()(["\n  query InteractivePostBodyQuery($postId: ID!, $showNotes: Boolean!) {\n    post(id: $postId) {\n      id\n      highlights {\n        id\n        ...ActiveSelectionContext_highlight\n        ...HighlighSegmentContext_highlight\n        ...NormalizeHighlights_highlight\n        ...PostBody_highlight\n      }\n      privateNotes @include(if: $showNotes) {\n        ...PostBody_privateNote\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return R=function(){return e},e}function k(){var e=s()(["\n  fragment InteractivePostBody_customStyleSheet on CustomStyleSheet {\n    id\n    ...PostBody_customStyleSheet\n  }\n  ","\n"]);return k=function(){return e},e}function A(){var e=s()(["\n  fragment InteractivePostBody_post on Post {\n    id\n    # please note that the postMeteringOptions is defined in handlers that use InteractivePostBody\n    # (PostHandler and SequencePostHandler)\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      bodyModel {\n        ...PostBody_bodyModel\n        paragraphs {\n          ...HighlighSegmentContext_paragraph\n          ...NormalizeHighlights_paragraph\n        }\n      }\n    }\n    creator {\n      id\n      allowNotes\n      ...PostBody_creator\n    }\n    ...ActiveSelectionContext_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return A=function(){return e},e}var D=(0,c.Ps)(A(),m.iF,h.iB,S,f.Pk,f.v),C=(0,c.Ps)(k(),f.xI),j=(0,c.Ps)(R(),m.UW,h.g8,f.XV,f.w6,P);const T=d.forwardRef((function(e,t){var n=e.activeGrafId,r=e.activeNoteId,i=e.customStyleSheet,l=e.isAuroraPostPageEnabled,s=e.post,c=e.postBodyInserts,E=s.content,y=s.latestPublishedVersion;if(!E)throw new Error("Expected post to have content.");var P={bodyModel:E.bodyModel,creator:s.creator,customStyleSheet:i,isAuroraPostPageEnabled:l,postBodyInserts:c,ref:t,richTextStyle:"FULL_PAGE"},S=s&&s.creator&&s.creator.allowNotes||!1;return E.isLockedPreviewOnly?d.createElement(f.ZP,P):d.createElement(u.AE,{notifyOnNetworkStatusChange:!0,ssr:!1,query:j,variables:{postId:s.id,showNotes:S}},(function(e){var t=e.data,i=(t=void 0===t?{}:t).post,l=E.bodyModel&&E.bodyModel.paragraphs,c=function(e,t){return e&&t?e.map((function(e){var n=e.endOffset,r=e.startOffset,o=e.paragraphs&&e.paragraphs[0],i=function(e,t){return e?t.find((function(t){var n=t.name;return e===n})):null}(o.name,t);if(!o||!i)return null;var l=x(o.text,r,n),s=x(i.text,r,n);if(!l||!s)return null;if(l===s)return e;var c=i.text?i.text.indexOf(l):null;return"number"!=typeof c||c<0?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{endOffset:c+l.length,startOffset:c})})).filter(v.b):e}(i&&i.highlights||[],l),u=i&&i.privateNotes||null;return d.createElement(g.yb,null,d.createElement(p.KN,{initialActivePrivateNoteId:r,initialActiveGrafName:n},d.createElement(m.Ms,{interactivePost:I({},s,{latestPublishedVersion:y}),highlights:c},d.createElement(w.Z,{nonBlocking:!0},(function(e){return d.createElement(h.U7,{highlights:c,paragraphs:l,viewer:e},d.createElement(f.ZP,o()({},P,{highlights:c,privateNotes:u})))})))))}))}))},51176:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=n(67294).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},51151:(e,t,n)=>{"use strict";n.d(t,{J:()=>v,u:()=>E});var r=n(28655),o=n.n(r),i=n(59713),a=n.n(i),l=n(71439),s=n(67294),c=n(19692),u=n(28309),d=n(14391),p=n(49920),m=n(83024);function g(){var e=o()(["\n  fragment ResponseQuote_post on Post {\n    inResponseToMediaResource {\n      href\n      mediumQuote {\n        quoteId\n        startOffset\n        endOffset\n        paragraphs {\n          ...TextParagraph_paragraph\n        }\n        ...buildQuotePreviewParagraph_quote\n      }\n    }\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.inResponseToMediaResource,n=(0,u.Iq)(),r=(0,u.Fg)(),o=(0,p.r)((function(e){e.preventDefault();var n=null==t?void 0:t.href;if(n){var r=null==n?void 0:n.split("#")[1];if(r){var o=r.split("--")[0];if(o){var i=document.getElementById(o);if(i){var a=(null==i?void 0:i.offsetTop)-100;a&&window.scrollTo({top:a,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]),i=null==t?void 0:t.mediumQuote;if(!i)return null;var a=(0,m.eu)(i);if(!a||!a.type)return null;var l=a.type;return l===d.NJ.IMG||l===d.NJ.IFRAME||l===d.NJ.COVER_TITLE||l===d.NJ.HR||l===d.NJ.MIXTAPE_EMBED||l===d.NJ.SECTION_CAPTION?null:s.createElement("div",{onClick:o,onKeyDown:o,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:r.backgroundColor})},s.createElement(c.ZP,{paragraph:h({},a,{name:"embedded-quote-".concat(i.quoteId,"-").concat(a.name)}),paragraphStyle:l,spaceTop:4,richTextStyle:"STREAM"}))},E=(0,l.Ps)(g(),m.Sz,c.Rg)},14267:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var r=n(67294).createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},setInResponseToQuote:function(){return null}})},70961:(e,t,n)=>{"use strict";n.d(t,{FP:()=>vt,ZR:()=>mt});var r=n(319),o=n.n(r),i=n(63038),a=n.n(i),l=n(59713),s=n.n(l),c=n(46829),u=n(67294),d=n.n(u),p=n(51176),m=n(14267),g=n(54803),f=n(2277),h=n(29355),v=n(70561),E=n(24548),y=n(28309),b=function(){var e=(0,y.Iq)();return u.createElement("div",{className:e((function(e){return{color:"white",backgroundColor:e.brandColor.sage.dark,borderRadius:"2px",fontSize:"11px",padding:"0px 6px",height:"16px",display:"flex",alignItems:"center",marginLeft:"8px"}}))},"AUTHOR")},x=n(66893),P=n(9785),S=n(98281),w=n(79316),O=n(80735),I=n(27572),R=n(93394),k=n(27952),A=n(28655),D=n.n(A),C=n(71439),j=n(53225);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e,t){var n,r=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!(null==r?void 0:r.responsesConnection)||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,i=o.filter((function(e){var n;return(null===(n=e.itemType.post)||void 0===n?void 0:n.id)!==t}));return i.length===o.length?null:Object.assign({},e,{post:_({},e.post,{postResponses:_({},r,{count:r.count-1,responsesConnection:_({},r.responsesConnection,{stream:i})})})})},M=n(32262),U=n(62630),L=n(88914);function N(){var e=D()(["\n  mutation DeleteResponseMutation($responseId: ID!) {\n    deletePost(targetPostId: $responseId)\n  }\n"]);return N=function(){return e},e}var F,W=(0,C.Ps)(N()),H=function(e){var t,n=e.response,r=e.parentPostId,o=e.hidePopoverMenu,i=u.useState(!1),l=a()(i,2),s=l[0],d=l[1],p=(0,U.Av)(),m=(0,I.pK)(),g=(0,v.I0)(),f=(0,P.YC)().value,h=(0,c.useMutation)(W,{variables:{responseId:n.id},update:function(e){var t={postId:r,postResponsesPaging:{limit:10}},i=e.readQuery({query:j.g,variables:t}),a=B(i,n.id);null!==a&&(e.writeQuery({query:j.g,data:a,variables:t}),p.event("responses.removed",{postId:n.id,source:m}),g((0,L.Dx)({message:"Successfully deleted response."})),o())}}),E=a()(h,1)[0];return(null==f?void 0:f.id)&&(null==f?void 0:f.id)===(null===(t=n.creator)||void 0===t?void 0:t.id)?u.createElement(u.Fragment,null,u.createElement(M.Sl,null,u.createElement(w.rU,{onClick:function(){return d(!0)}},"Delete")),s&&u.createElement(w.Vq,{isVisible:s,hide:function(){return d(!1)},withCloseButton:!1,noPortal:!0,padding:50},u.createElement(w.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},u.createElement(O.X6,{scale:"M"},"Delete"),u.createElement(w.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},u.createElement(O.F,{scale:"M",color:"DARKER"},"Deleted responses are gone forever.",u.createElement("br",null),"Are you sure?")),u.createElement(w.xu,{display:"flex",marginBottom:"20px"},u.createElement(w.rU,{onClick:function(){return d(!1)}},u.createElement(O.F,{scale:"M",color:"DARKER"},"Cancel")),u.createElement(w.xu,{marginLeft:"25px"},u.createElement(w.zx,{buttonStyle:"ERROR",onClick:E,"data-test-id":"close-discussion-button"},"Delete Response")))))):null};!function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(F||(F={}));var V=n(6688),Y=n(18970);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(){var e=D()(["\n  mutation UserBlockMutation($targetUserId: ID!, $userId: ID!) {\n    blockUser(userId: $userId, targetUserId: $targetUserId) {\n      id\n      isBlocking\n    }\n  }\n"]);return $=function(){return e},e}var z=(0,C.Ps)($()),G=function(e){var t,n,r=e.response,o=e.parentPost,i=e.hidePopoverMenu,l=(0,P.YC)().value,s=(0,U.Av)(),d=(0,I.pK)(),p=(0,v.I0)(),m=u.useState(!1),g=a()(m,2),f=g[0],h=g[1],E=function(){return h(!1)},y=null==r||null===(t=r.creator)||void 0===t?void 0:t.id,b=(0,c.useMutation)(z,{variables:{targetUserId:y,userId:null==l?void 0:l.id},update:function(e){var t={postId:o.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:j.g,variables:t}),r=K(n,y);null!==r&&e.writeQuery({query:j.g,data:r,variables:t})},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:y,isBlocking:!0}},onCompleted:function(){E(),p((0,L.Dx)({message:"Responses by this user have been hidden from this story."}))}}),x=a()(b,1)[0],S=null===(n=o.creator)||void 0===n?void 0:n.id,O=(null==l?void 0:l.id)===S;return(null==l?void 0:l.id)===y?null:l&&y&&O?u.createElement(u.Fragment,null,u.createElement(M.Sl,null,u.createElement(w.rU,{onClick:function(){h(!0)}},"Block this author")),f&&u.createElement(Y.Z,{onConfirm:function(){s.event("user.blocked",{userId:y,source:d}),x()},isVisible:f,isInResponsesSidebar:!0,hide:function(){E(),i()}})):null},K=function(e,t){var n,r=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!t||!(null==r?void 0:r.responsesConnection)||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,i=o.filter((function(e){var n,r;return(null===(n=e.itemType.post)||void 0===n||null===(r=n.creator)||void 0===r?void 0:r.id)!==t}));if(i.length===o.length)return null;var a=o.length-i.length;return q({},e,{post:q({},e.post,{postResponses:q({},r,{count:r.count-a,responsesConnection:q({},r.responsesConnection,{stream:i})})})})},Z=function(e){var t,n=e.response,r=(0,P.YC)().value,o=u.useContext(p.Q),i=o.setIsEditing,a=o.isEditing,l=o.setEditingQuote;return(null===(t=n.creator)||void 0===t?void 0:t.id)===(null==r?void 0:r.id)?u.createElement(M.Sl,null,u.createElement(w.rU,{onClick:function(){n.inResponseToMediaResource&&l(n.inResponseToMediaResource.mediumQuote),i(!a)}},"Edit this response")):null};function X(){var e=D()(["\n  mutation HidePostResponseOnParentMutation($parentPostId: ID!, $postResponseId: ID!) {\n    hidePostResponseOnParentPost(parentPostId: $parentPostId, postResponseId: $postResponseId)\n  }\n"]);return X=function(){return e},e}var J=(0,C.Ps)(X()),ee=function(e){var t,n,r,o=e.responseToBeHidden,i=e.parentPost,l=e.hidePopoverMenu,s=(0,P.YC)().value,d=(0,v.I0)(),p=(0,U.Av)(),m=(0,I.pK)(),g=(null==s?void 0:s.id)===(null===(t=i.creator)||void 0===t?void 0:t.id),f=null==i||null===(n=i.collection)||void 0===n?void 0:n.viewerIsEditor,h=(null==s?void 0:s.id)===(null===(r=o.creator)||void 0===r?void 0:r.id),E=(0,c.useMutation)(J,{variables:{postResponseId:o.id,parentPostId:i.id},update:function(e){var t={postId:i.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:j.g,variables:t}),r=B(n,o.id);null!==r&&(e.writeQuery({query:j.g,data:r,variables:t}),p.event("response.hidden",{postId:o.id,source:m}),d((0,L.Dx)({message:"",toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:o.id,parentPostId:i.id}})),l())}}),y=a()(E,1)[0];return h?null:g||f?u.createElement(M.Sl,null,u.createElement(w.rU,{onClick:y},"Hide this response")):null};function te(){var e=D()(["\n  mutation UserReportStoryMutation(\n    $targetPostId: ID!\n    $targetAuthorId: ID!\n    $alsoBlockAuthor: Boolean!\n    $reason: String!\n  ) {\n    reportStoryAndMaybeBlockAuthor(\n      targetPostId: $targetPostId\n      targetAuthorId: $targetAuthorId\n      alsoBlockAuthor: $alsoBlockAuthor\n      reason: $reason\n    ) {\n      id\n      isBlocking\n    }\n  }\n"]);return te=function(){return e},e}var ne=(0,C.Ps)(te()),re=n(62181),oe=n(90639),ie=function(e){var t,n=e.response,r=e.parentPost,o=e.hidePopoverMenu,i=(0,P.YC)().value,l=(0,U.Av)(),s=(0,I.pK)(),d=u.useState(!1),p=a()(d,2),m=p[0],g=p[1],f=function(e){var t,n,r=e.response,o=r.id,i=null===(t=r.creator)||void 0===t?void 0:t.id,l=null===(n=r.creator)||void 0===n?void 0:n.isBlocking,s=(0,v.I0)(),d=(0,c.useMutation)(ne,{variables:{targetPostId:o,targetAuthorId:i,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){s((0,L.Dx)({message:"Successfully reported post."}))}}),p=a()(d,2),m=p[0],g=p[1];return{reportStory:u.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,r=e.reportReason;return m({variables:{targetPostId:o,targetAuthorId:i,alsoBlockAuthor:n,reason:void 0===r?"Spam":r},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:i,isBlocking:l||n}}})}),[r,m]),error:null==g?void 0:g.error,loading:null==g?void 0:g.loading}}({response:n}).reportStory,h=(null==i?void 0:i.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);return!n.creator||h?null:u.createElement(u.Fragment,null,u.createElement(M.Sl,null,(null==i?void 0:i.id)?u.createElement(w.rU,{onClick:function(){return g(!0)}},"Report this response"):u.createElement(re.R9,{operation:"register",post:r,susiEntry:"respond_sidebar"},"Report this response")),u.createElement(oe.Z,{onSubmit:function(e,t){return l.event("response.flagged",{postId:n.id,reason:t,source:s}),f({alsoBlockAuthor:e,reportReason:t})},isVisible:m,hide:function(){g(!1),o()},isResponse:!0}))},ae=n(965),le=n(16811),se=n(55573),ce=function(e){var t=e.response,n=e.hidePopoverMenu,r=(0,ae.CP)(),o=(0,U.Av)(),i=(0,P.YC)().value,a=(0,I.pK)(),l=(0,v.v9)((function(e){return e.multiVote.clapsPerPost})),s=(0,v.I0)(),c=u.useCallback((function(e){return s((0,le.at)(e))}),[s]),d=(0,se.l)(l,t),p=d.clapCount,m=d.viewerClapCount;return(null==i?void 0:i.id)&&0!==p&&0!==m?u.createElement(M.Sl,null,u.createElement(w.rU,{onClick:function(){r(t,(null==i?void 0:i.id)||"",-m),c({postId:t.id,clapCount:p-m,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),o.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:m,source:a}),n()}},"Undo applause for this response")):null},ue={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},de=function(e){var t=e.response,n=e.responseType,r=e.parentPost,o=e.isPopoverMenuVisible,i=e.hidePopoverMenu,a=(0,V.I)(),l=Boolean((0,x.P5)("enable_responses_moderation")),s=t.creator,c=Boolean((0,x.P5)("enable_responses_edit_and_delete")),d=u.useRef(null);return u.useEffect((function(){var e=function(e){var t;(null==d||null===(t=d.current)||void 0===t?void 0:t.contains(e.target))||i()};if(o)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[o]),t&&s?u.createElement("div",{className:a(ue),ref:d},u.createElement(M.mX,null,u.createElement(u.Fragment,null,u.createElement(ie,{response:t,parentPost:r,hidePopoverMenu:i}),l&&u.createElement(u.Fragment,null,u.createElement(ee,{responseToBeHidden:t,parentPost:r,hidePopoverMenu:i}),u.createElement(G,{response:t,parentPost:r,hidePopoverMenu:i})),n===F.SIMPLE&&u.createElement(ce,{response:t,hidePopoverMenu:i})),c&&u.createElement(u.Fragment,null,n===F.SIMPLE&&u.createElement(Z,{response:t}),u.createElement(H,{response:t,hidePopoverMenu:i,parentPostId:r.id})))):null},pe=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},me=function(e){var t,n=e.response,r=e.responseType,o=e.parentPost,i=(0,P.YC)().value,l=(0,y.Iq)(),s=n.creator,c=n.mediumUrl,d=n.createdAt,p=u.useState(!1),m=a()(p,2),g=m[0],f=m[1],h=Boolean((0,x.P5)("enable_responses_edit_and_delete")),A=(0,v.v9)((function(e){return e.config.authDomain}));if(!n||!s||!c)return null;var D=(null===(t=o.creator)||void 0===t?void 0:t.id)===s.id,C=(null==i?void 0:i.id)===s.id,j=!!h||!C,T=h&&function(e,t){return e&&t===F.SIMPLE}(n,r)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt);return u.createElement(u.Fragment,null,u.createElement(w.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between"},u.createElement(w.xu,{display:"flex",flexDirection:"row",alignItems:"center"},u.createElement(S.ZP,{scale:"XS",user:s}),u.createElement(w.xu,{paddingLeft:"12px"},u.createElement(w.xu,{display:"flex",flexDirection:"row"},u.createElement(w.rU,{href:(0,k.AW)(s.username||"",A,s.hasDomain)},u.createElement(O.F,{scale:"M",color:"DARKER"},s.name)),D&&u.createElement(b,null)),u.createElement(w.rU,{href:c,linkStyle:"SUBTLE",inline:!0,noFollow:!0},u.createElement(O.F,{scale:"M"},u.createElement(E.Z,{timestamp:d}),T&&u.createElement(u.Fragment,null," (edited)"))))),j&&u.createElement(w.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),f(!g)},inline:!0,className:l(pe)},u.createElement(R.Z,null))),g&&u.createElement("div",{className:l({position:"relative"})},u.createElement(I.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(de,{response:n,responseType:r,parentPost:o,isPopoverMenuVisible:g,hidePopoverMenu:function(){return f(!1)}}))))},ge=n(51151),fe=n(79956),he=n(79914),ve=n(14391),Ee=n(50993);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return"char"===e&&t>g.gs||"line"===e&&n>g._W}function Pe(e){var t=e.paragraphs,n=e.truncateStrategy,r=e.isExpanded,o=(0,y.Iq)(),i=0,a=0,l="none"!==n&&!r;return u.createElement("pre",{className:o({whiteSpace:"pre-wrap"})},t.map((function(e){if(!r&&xe(n,i,a))return null;var t=(null==e?void 0:e.text)||"";i+=t.length||0,a+=t.split("\n").length||0;var s=be({},e,{dropCapImage:null,hasDropCap:null}),c=!r&&xe(n,i,a);if(c&&"char"===n){var d=g.gs-(i-t.length||0);s.markups=s.markups.reduce((function(e,t){if(t.start<d){var n=be({},t);n.end>d&&(n.end=d),e.push(n)}return e}),[]),s.text=(0,Ee.N8)(t,d)}return u.createElement(w.xu,{padding:"5px 0px",key:e.name||e.id},u.createElement(O.F,{scale:"M",color:"DARKER"},u.createElement("div",{className:o({lineHeight:"24px"})},u.createElement(he.T2,{paragraph:s,richTextStyle:"FULL_PAGE",paragraphStyle:ve.NJ.P}),l&&c&&"...")))})).filter((function(e){return!!e})))}var Se=n(36808),we=n(15699),Oe=n(29035),Ie=function(){return{border:"none",padding:"0 0 5px",cursor:"pointer"}},Re=function(e){var t,n=e.simpleResponse,r=e.parentPost,o=e.omitBottomBorder,i=n.creator,l=n.content,s=n.mediumUrl,c=n.isLimitedState,d=u.useState(!1),p=a()(d,2),m=p[0],v=p[1],E=u.useRef(null),b=(0,y.Iq)();(0,Se.Vj)(E,n);var x=null==l||null===(t=l.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(i&&l&&x&&s))return null;var P,S=(P=x.map((function(e){return e.text||""}))).join("").length>320?"char":P.join("\n").split("\n").length>g._W?"line":"none",I="none"!==S,R=I&&!m,k=(0,Oe.ic)(navigator&&navigator.userAgent);return u.createElement(we.Z,{post:n,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!I},u.createElement(w.xu,{paddingTop:"25px",paddingBottom:k&&o?"48px":"16px",borderBottom:o?void 0:"BASE_LIGHTER",ref:E},u.createElement(me,{response:n,responseType:F.SIMPLE,parentPost:r}),u.createElement(ge.J,{inResponseToMediaResource:n.inResponseToMediaResource}),u.createElement(w.xu,{marginTop:"5px"},u.createElement(f.c.Provider,{value:!0},u.createElement(Pe,{paragraphs:x,truncateStrategy:S,isExpanded:m}))),R&&u.createElement("button",{onClick:function(){return v(!0)},className:b(Ie)},u.createElement(O.F,{scale:"S",color:"ACCENT",tag:"span"},"Read More")),u.createElement(w.xu,{display:"flex",flexDirection:"row",alignItems:"center",marginTop:"14px"},u.createElement(h.S,{buttonStyle:"SUBTLE",post:n,shouldShowResponsiveLabelText:!0,susiEntry:"respond_sidebar"}),u.createElement(w.xu,{width:"12px"}),u.createElement(w.rU,{href:s+"?responsesOpen=true"},u.createElement(fe.h,{location:"response",postId:n.id,responsesCount:n.responsesCount,setIsResponsesSidebarVisible:function(){},allowResponses:n.allowResponses,isLimitedState:c})))))},ke=n(68356),Ae=n.n(ke),De=n(19537),Ce=n(79853),je=n(90320);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _e={delay:1e3,timeout:2e4,loading:function(e){return e.error?u.createElement(Ce.Z,{error:e.error}):e.timedOut?u.createElement(Ce.Z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?u.createElement(je.Z,null):null}},Be=Ae()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},_e,{loader:function(){return Promise.all([n.e(6441),n.e(2514),n.e(6635)]).then(n.bind(n,30400))},modules:["src/components/responses/editor/InlineResponseEditor"],webpack:function(){return[30400]},render:function(e,t){var n=e.InlineResponseEditor;return u.createElement(n,t)}})),Me=function(e){var t=e.parentPostId,n=e.responseId,r=e.type,o=void 0===r?De.H.create:r,i=e.initialValue;return u.createElement(Be,{parentPostId:t,responseId:n,type:o,initialValue:i})},Ue=function(e){var t,n,r,i,l=e.response,s=e.index,c=e.parentPost,d=e.omitBottomBorder,g=u.useState(!1),f=a()(g,2),h=f[0],v=f[1],E=u.useState(null),y=a()(E,2),b=y[0],x=y[1],P=u.useContext(m.D),S=P.editingResponsesAtIndices,w=P.setEditingResponsesAtIndices;return u.useEffect((function(){if(h&&!S.includes(s)&&w([].concat(o()(S),[s])),!h&&S.includes(s)){var e=S.filter((function(e){return e!==s}));w(e)}}),[h,S,w]),l.post?h?u.createElement(p.Q.Provider,{value:{isEditing:h,setIsEditing:v,latestRev:null===(t=l.post)||void 0===t?void 0:t.latestRev,createdAt:null===(n=l.post)||void 0===n?void 0:n.createdAt,setEditingQuote:x,editingQuote:b}},u.createElement(I.cW,{source:{index:s},key:l.post.id,extendSource:!0},u.createElement(Me,{type:De.H.edit,parentPostId:c.id,responseId:l.post.id,initialValue:null==l||null===(r=l.post)||void 0===r||null===(i=r.content)||void 0===i?void 0:i.bodyModel}))):u.createElement(p.Q.Provider,{value:{isEditing:h,setIsEditing:v,setEditingQuote:x,editingQuote:b}},u.createElement(I.cW,{source:{index:s},key:l.post.id,extendSource:!0},u.createElement(Re,{parentPost:c,simpleResponse:l.post,omitBottomBorder:d}))):null},Le={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},Ne=function(){var e=(0,y.om)({shimmerKeyframesName:Le}).shimmerKeyframesName,t=(0,y.Iq)();return u.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},u.createElement(w.xu,{display:"flex",flexDirection:"row"},u.createElement(w.xu,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),u.createElement(w.xu,{marginLeft:"8px",marginTop:"4px"},u.createElement(w.xu,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(w.xu,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),u.createElement(w.xu,{marginTop:"12px"},u.createElement(w.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(w.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(w.xu,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))},Fe=n(81162),We=n(14349),He=n(27390),Ve=function(e){return{fill:e.baseColor.fill.lighter,float:"right"}},Ye=function(e){var t,n,r=e.storyResponse,o=e.parentPost,i=e.omitBottomBorder,a=(0,y.Iq)(),l=(0,y.Fg)(),s=r.creator,c=r.previewContent,d=r.mediumUrl,p=r.clapCount,m=r.responsesCount,g=null==c||null===(t=c.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(s&&c&&c.bodyModel&&d&&g))return null;var f=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;if(l.text&&(t.push(l),t.length>=2))break}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return{title:t[0],subtitle:t[1]}}(g);if(!f.title&&!f.subtitle)return null;var h,v=null!==(null===(n=r.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),E=m||0;return u.createElement(we.Z,{post:r,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!1},u.createElement(w.xu,{paddingTop:"25px",paddingBottom:"20px",borderBottom:i?void 0:"BASE_LIGHTER"},u.createElement(me,{response:r,responseType:F.STORY,parentPost:o}),u.createElement(ge.J,{inResponseToMediaResource:r.inResponseToMediaResource}),u.createElement(w.P3,{href:(0,k.jV)(r)},u.createElement("div",{className:a({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:v?"12px":"16px",backgroundColor:l.backgroundColor})},u.createElement("div",{className:a(Ve)},u.createElement(O.F,{scale:"S",color:"LIGHTER"},u.createElement(w.xu,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:p>0||E>0?"20px":"0"},p>0?u.createElement(w.xu,{display:"flex",alignItems:"center"},u.createElement(w.xu,{tag:Fe.Z,marginRight:"2px"}),u.createElement("div",null,(0,He.pY)(p))):null,E>0?u.createElement(w.xu,{display:"flex",alignItems:"center"},u.createElement(w.xu,{tag:We.Z,marginLeft:p?"8px":"0",marginRight:"2px"}),u.createElement("div",null,(0,He.pY)(E))):null))),u.createElement(O.F,{scale:"M",clamp:2,color:"DARKER"},f.title&&u.createElement(w.xu,null,f.title.text),f.subtitle&&u.createElement("div",{className:a((h=f.title.type,function(e){return{color:h===ve.NJ.H3?e.baseColor.text.lighter:e.baseColor.text.normal}}))},f.subtitle.text))))))},Qe=n(31078),qe={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},$e=function(e){var t=e.parentPostId,n=e.responsesLocked,r=e.isPopoverMenuVisible,o=e.hidePopoverMenu,i=(0,V.I)(),a=(0,v.v9)((function(e){return e.config.authDomain})),l=u.useRef(null);return u.useEffect((function(){var e=function(e){var t;(null==l||null===(t=l.current)||void 0===t?void 0:t.contains(e.target))||o()};if(r)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),u.createElement("div",{className:i(qe),ref:l},u.createElement(M.mX,null,u.createElement(M.Sl,null,u.createElement(w.rU,{href:(0,k.t$)(a,t)},"Manage responses")),u.createElement(Qe.Eq,{parentPostId:t,responsesLocked:n,hidePopoverMenu:o})))},ze=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},Ge=function(e){var t,n,r=e.parentPost,o=e.responsesLocked,i=(0,V.I)(),l=(0,P.YC)().value,s=(0,v.v9)((function(e){return e.config.authDomain})),c=Boolean((0,x.P5)("enable_lock_responses")),d=u.useState(!1),p=a()(d,2),m=p[0],g=p[1],f=(null==l?void 0:l.id)===(null===(t=r.creator)||void 0===t?void 0:t.id),h=null==r||null===(n=r.collection)||void 0===n?void 0:n.viewerIsEditor;return f||h?c?u.createElement(w.xu,null,u.createElement(w.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),g(!m)},inline:!0,className:i(ze)},u.createElement(R.Z,null)),m&&u.createElement("div",{className:i({position:"relative"})},u.createElement(I.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement($e,{parentPostId:r.id,responsesLocked:o,isPopoverMenuVisible:m,hidePopoverMenu:function(){return g(!1)}})))):u.createElement(w.xu,{paddingRight:"8px"},u.createElement(w.rU,{href:(0,k.t$)(s,r.id),linkStyle:"OBVIOUS",inline:!0},u.createElement(O.F,{scale:"S",color:"LIGHTER"},"Manage responses"))):null},Ke=n(1036),Ze=n(24087),Xe=n(3149);function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var et=d().createElement("path",{d:"M3.85 5.15a.5.5 0 0 0-.7.7l4.35 4.36 4.35-4.36a.5.5 0 1 0-.7-.7L7.5 8.79 3.85 5.15z",fillRule:"evenodd"});const tt=function(e){return d().createElement("svg",Je({width:15,height:15,viewBox:"0 0 15 15"},e),et)};var nt,rt;!function(e){e.StoryResponse="StreamItemPostStoryResponse",e.SimpleResponse="StreamItemPostSimpleResponse"}(nt||(nt={})),function(e){e.Recommended="Recommended",e.Oldest="Oldest",e.Newest="Newest"}(rt||(rt={}));var ot=[rt.Recommended,rt.Newest,rt.Oldest],it={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},at=function(e,t,n){return{backgroundColor:e&&e.id&&e.id===(t&&t.id)?n.highlightColor.light:void 0,padding:"0 24px"}},lt=function(e){var t,n,r,o=e.responses,i=e.parentPost,l=e.responsesLocked,s=e.isLockedResponse,c=e.isLoadingInitialContent,d=e.isFetchingNextSetOfResponses,p=e.isResponsesSidebarVisible,g=e.setIsResponsesSidebarVisible,f=e.inResponseToQuote,h=e.setInResponseToQuote,v=(0,y.Iq)(),E=(0,y.Fg)(),b=u.useState(rt.Recommended),x=a()(b,2),P=x[0],S=x[1],R=u.useState(!1),k=a()(R,2),A=k[0],D=k[1],C=u.useState([]),j=a()(C,2),T=j[0],_=j[1],B=i.id,U=(null==o?void 0:o.count)&&0!==(null==o?void 0:o.count)?"(".concat(null==o?void 0:o.count,")"):"",L=null==o||null===(t=o.responsesConnection)||void 0===t?void 0:t.stream,N=null==o||null===(n=o.responsesConnection)||void 0===n||null===(r=n.pagingInfo)||void 0===r?void 0:r.next,F=L&&o&&o.count&&(null==L?void 0:L.length)<(null==o?void 0:o.count)-1,W=d&&N&&F;return u.createElement(m.D.Provider,{value:{setIsSavingResponse:D,responsesLocked:l,isLockedResponse:s,editingResponsesAtIndices:T,setEditingResponsesAtIndices:_,inResponseToQuote:f,setInResponseToQuote:h}},p&&A&&u.createElement(w.TF,{horizontalOverride:{left:"calc(100vw - ".concat(mt,")")}}),u.createElement(w.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},u.createElement(O.X6,{scale:"S"},"Responses ",U),u.createElement(w.xu,{display:"flex",flexDirection:"row"},u.createElement(Ge,{parentPost:i,responsesLocked:l}),u.createElement(w.xu,{position:"relative",right:"-7px"},u.createElement(Xe.Z,{onClick:function(){return g(!1)},size:"REGULAR",isPositionAbsolute:!1})))),c?u.createElement(w.xu,{padding:"0 24px"},u.createElement(Ne,null)):u.createElement(u.Fragment,null,u.createElement(Me,{parentPostId:B}),u.createElement(Ke.Z,{name:"enable_responses_sortby"},u.createElement(w.Bn,{initialVisibility:!0},(function(e){var t=e.isVisible,n=e.toggle,r=e.hide;return u.createElement(w.xu,{backgroundColor:"BASE_LIGHT",padding:"10px 24px"},u.createElement(w.J2,{isVisible:t,hide:r,customZIndex:530,popoverRenderFn:function(){return u.createElement(M.mX,null,ot.map((function(e){return u.createElement(M.Sl,null,u.createElement(w.rU,{linkStyle:"SUBTLE",onClick:function(){!function(e){S(e)}(e),r()}},e))})))}},u.createElement(w.rU,{onClick:n},P,u.createElement(tt,{className:v({margin:"0px 5px"})}))))}))),o&&0!==(null==L?void 0:L.length)?u.createElement(Ze.Z,null,(function(e){return u.createElement(w.xu,null,null==L?void 0:L.map((function(t,n){var r=t.itemType.__typename,o=T.includes(n+1),a=L.length-1===n;switch(r){case nt.SimpleResponse:var l=t.itemType;return l.post?u.createElement("div",{key:l.post.id,className:v(at(e,l.post.creator,E))},u.createElement(Ue,{response:l,index:n,parentPost:i,omitBottomBorder:o||a})):null;case nt.StoryResponse:var s=t.itemType;return s.post?u.createElement(I.cW,{source:{index:n},key:s.post.id,extendSource:!0},u.createElement("div",{className:v(at(e,s.post.creator,E))},u.createElement(Ye,{storyResponse:s.post,parentPost:i,omitBottomBorder:o||a}))):null;default:return null}})),W&&u.createElement(Ne,null))})):u.createElement("div",{className:v(it)},u.createElement(O.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),u.createElement(O.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},st=n(89714),ct=n(80637);function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt=function(){return{top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,transition:"opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",pointerEvents:"none"}},mt="414px",gt=function(e){return s()({width:mt,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,ct.sm)(e),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"})},ft=function(e,t){return function(n){if(e){var r=n.breakpoints.md-.02;return t<=r?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},ht=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},vt=function(e){var t,n,r,o,i,l,s=e.setIsResponsesSidebarVisible,d=e.isResponsesSidebarVisible,p=e.inResponseToQuote,m=e.setInResponseToQuote,g=e.parentPost,f=(0,st.Uo)().baseTheme,h=(0,y.Iq)(),v=(0,c.useQuery)(j.g,{variables:{postId:g.id,postResponsesPaging:{limit:10}},ssr:!1}),E=v.loading,b=v.data,x=v.fetchMore,P=null==b||null===(t=b.post)||void 0===t?void 0:t.responsesLocked,S=null==b||null===(n=b.post)||void 0===n?void 0:n.isLockedResponse,O=null==b||null===(r=b.post)||void 0===r?void 0:r.postResponses,R=u.useState(0),k=a()(R,2),A=k[0],D=k[1],C=u.useState(!1),T=a()(C,2),_=T[0],B=T[1];u.useEffect((function(){A||D(window.innerWidth)}),[]);var M=null==O||null===(o=O.responsesConnection)||void 0===o||null===(i=o.pagingInfo)||void 0===i?void 0:i.next;if(M){var U={postId:g.id,postResponsesPaging:{limit:M.limit,to:M.to}};l=function(){return x({variables:U,updateQuery:function(e,t){var n=t.fetchMoreResult;return B(!1),yt(e,n)}})}}return u.createElement(w.f6,{theme:f},u.createElement(I.cW,{source:{name:"responses",postId:g.id},extendSource:!0},u.createElement(w.xu,{print:{display:"none"}},u.createElement("div",{className:h([pt,ht(d)]),onClick:function(){s(!1)},"aria-hidden":!d}),u.createElement("div",{className:h([gt,ft(d,A)]),"aria-hidden":!d,onScroll:function(e){return Et(e,M,_,B,l)}},u.createElement(lt,{responses:O,parentPost:g,responsesLocked:P,isLockedResponse:S,isLoadingInitialContent:E,isFetchingNextSetOfResponses:_,isResponsesSidebarVisible:d,setIsResponsesSidebarVisible:s,inResponseToQuote:p,setInResponseToQuote:m})))))},Et=function(e,t,n,r,o){e.preventDefault();var i=e.currentTarget;i.scrollHeight-i.scrollTop-i.clientHeight<1.5*i.clientHeight&&t&&!n&&(r(!0),o())},yt=function(e,t){var n,r,i,a,l,s,c,u,d=null==t||null===(n=t.post)||void 0===n?void 0:n.postResponses,p=null==t?void 0:t.post;if(!p||!d||!(null===(r=d.responsesConnection)||void 0===r?void 0:r.stream))return e;var m=(null==e||null===(i=e.post)||void 0===i||null===(a=i.postResponses)||void 0===a||null===(l=a.responsesConnection)||void 0===l?void 0:l.stream)||[],g=(null==t||null===(s=t.post)||void 0===s||null===(c=s.postResponses)||void 0===c||null===(u=c.responsesConnection)||void 0===u?void 0:u.stream)||[];return{post:dt({},p,{postResponses:dt({},d,{responsesConnection:dt({},d.responsesConnection,{stream:[].concat(o()(m),o()(g))})})})}}},53225:(e,t,n)=>{"use strict";n.d(t,{g:()=>h});var r=n(28655),o=n.n(r),i=n(71439),a=n(8011),l=n(98281),s=n(15699);function c(){var e=o()(["\n  fragment ResponseHeader_post on Post {\n    createdAt\n    creator {\n      ...UserAvatar_user\n      isBlocking\n    }\n    mediumUrl\n  }\n  ","\n"]);return c=function(){return e},e}var u=(0,i.Ps)(c(),l.WQ),d=n(51151);function p(){var e=o()(["\n  fragment StoryResponse_storyResponse on StreamItemPostStoryResponse {\n    post {\n      ...ResponseHeader_post\n      ...ResponseQuote_post\n      id\n      responsesCount\n      creator {\n        isBlocking\n        hasDomain\n      }\n      clapCount\n      ...PostPresentationTracker_post\n      previewContent {\n        bodyModel {\n          paragraphs {\n            text\n            type\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var m=(0,i.Ps)(p(),u,l.WQ,s.h,d.u),g=n(31078);function f(){var e=o()(['\n  query PostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      postResponses {\n        count\n        responsesConnection(paging: $postResponsesPaging) @connection(key: "responsesConnection") {\n          pagingInfo {\n            next {\n              limit\n              to\n            }\n          }\n          stream {\n            itemType {\n              __typename\n              ... on StreamItemPostStoryResponse {\n                ...StoryResponse_storyResponse\n              }\n              ... on StreamItemPostSimpleResponse {\n                ...SimpleResponse_simpleResponse\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"]);return f=function(){return e},e}var h=(0,i.Ps)(f(),g.Z,m,a.y)},8011:(e,t,n)=>{"use strict";n.d(t,{y:()=>u});var r=n(28655),o=n.n(r),i=n(71439),a=n(5399),l=n(51151),s=n(36808);function c(){var e=o()(["\n  fragment SimpleResponse_simpleResponse on StreamItemPostSimpleResponse {\n    post {\n      id\n      createdAt\n      firstPublishedAt\n      latestPublishedAt\n      title\n      creator {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        isBlocking\n        hasDomain\n      }\n      clapCount\n      viewerClapCount\n      isPublished\n      voterCount\n      responsesCount\n      allowResponses\n      latestRev\n      recommenders {\n        id\n        name\n      }\n      mediumUrl\n      content {\n        bodyModel {\n          paragraphs {\n            text\n          }\n          ...getSlateBodyFromPostBodyModel_bodyModel\n        }\n      }\n      collection {\n        id\n        slug\n      }\n      isLimitedState\n      ...PostPresentationTracker_post\n      ...PostScrollTracker_post\n      ...ResponseQuote_post\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return e},e}var u=(0,i.Ps)(c(),s.h_,s.kH,l.u,a.I)},19537:(e,t,n)=>{"use strict";var r;n.d(t,{H:()=>r}),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},31078:(e,t,n)=>{"use strict";n.d(t,{Eq:()=>R,Z:()=>A});var r=n(59713),o=n.n(r),i=n(63038),a=n.n(i),l=n(28655),s=n.n(l),c=n(71439),u=n(46829),d=n(67294),p=n(32262),m=n(79316),g=n(80735),f=n(62630),h=n(27572),v=n(28309);function E(){var e=s()(["\n  query FetchPostResponsesLockedQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function y(){var e=s()(["\n  fragment CloseDiscussion_post on Post {\n    id\n    responsesLocked\n    isLockedResponse\n  }\n"]);return y=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(){var e=s()(["\n  mutation UnlockResponsesOnPostMutation($postId: ID!) {\n    unlockResponsesOnPost(postId: $postId)\n  }\n"]);return P=function(){return e},e}function S(){var e=s()(["\n  mutation LockResponsesOnPostMutation($postId: ID!) {\n    lockResponsesOnPost(postId: $postId)\n  }\n"]);return S=function(){return e},e}var w=function(){return{fontStyle:"italic",textAlign:"center"}},O=(0,c.Ps)(S()),I=(0,c.Ps)(P()),R=function(e){var t,n=e.parentPostId,r=e.responsesLocked,o=e.hidePopoverMenu,i=(0,v.Iq)(),l=(0,f.Av)(),s=(0,h.pK)(),c=d.useState(!1),E=a()(c,2),y=E[0],b=E[1],x=(0,u.useMutation)(O,{variables:{postId:n},update:function(e){l.event("responses.locked",{postId:n,source:s}),k(e,n,!0,o)}}),P=a()(x,1)[0],S=(0,u.useMutation)(I,{variables:{postId:n},update:function(e){k(e,n,!1,o)}}),R=a()(S,1)[0];return t=!0===r?d.createElement(m.rU,{onClick:R},"Open discussion"):d.createElement(m.rU,{onClick:function(){return b(!0)}},"Close discussion"),d.createElement(d.Fragment,null,d.createElement(p.Sl,null,t),y&&d.createElement(m.Vq,{isVisible:y,hide:function(){return b(!1)},withCloseButton:!1,noPortal:!0,padding:50},d.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},d.createElement(g.X6,{scale:"M"},"Close Discussion"),d.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},d.createElement(g.F,{scale:"M",color:"DARKER"},"Closing a discussion prevents responses from being added or edited on your story. Existing responses will remain on your story.")),d.createElement(m.xu,{display:"flex",marginBottom:"20px"},d.createElement(m.rU,{onClick:function(){return b(!1)}},d.createElement(g.F,{scale:"M",color:"DARKER"},"Cancel")),d.createElement(m.xu,{marginLeft:"25px"},d.createElement(m.zx,{buttonStyle:"ERROR",onClick:P,"data-test-id":"close-discussion-button"},"Close discussion"))),d.createElement("div",{className:i(w)},d.createElement(g.F,{scale:"M"},"You can reopen the discussion at any time.")))))},k=function(e,t,n,r){var o=e.readQuery({query:D,variables:{postId:t}});o&&(e.writeQuery({query:D,data:Object.assign({},o,{post:x({},o.post,{responsesLocked:n})}),variables:{postId:t}}),r())},A=(0,c.Ps)(y()),D=(0,c.Ps)(E(),A)},37258:(e,t,n)=>{"use strict";n.d(t,{o:()=>x});var r=n(63038),o=n.n(r),i=n(28655),a=n.n(i),l=n(71439),s=n(46829),c=n(80439),u=n(67294),d=n(70561),p=n(24087),m=n(66893),g=n(90738),f=n(14414),h=n(62630),v=n(27572),E=n(11348);function y(){var e=a()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}var b=(0,l.Ps)(y()),x=function(e){var t=e.actionUrl,n=e.children,r=e.onSuccess,i=e.token,a=e.userId,l=(0,h.Av)(),y=!!(0,m.P5)("skip_sign_in_recaptcha"),x=u.useState(!1),P=o()(x,2),S=P[0],w=P[1],O=(0,d.v9)((function(e){return e.navigation.currentLocation})),I=(0,d.v9)((function(e){return e.session.user.id})),R=function(){w(!1)},k=(0,v.pK)(),A=(0,v.hp)(),D=t&&i?(0,f.hQ)(O,k,A,t,i):(0,f.hQ)(O,k,A),C=(0,s.useQuery)(p.e),j=C.loading,T=C.error,_=C.data,B=(_=void 0===_?{viewer:void 0}:_).viewer;return j||T?u.createElement(u.Fragment,null):u.createElement(c.mm,{mutation:b,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":l.event("site.loginLinkSent",{}),r&&r();break;case"FailedChallenge":l.event("site.loginByEmailCaptchaFailure",{}),w(!1);break;case"BadRequest":case"NotFound":default:R()}},onError:R},(function(e){var t=function(t){var n=B?B.id:I;(0,E.Zs)(!0,n,a,"Email",!1);var r="medium";l.event("susi.methodClicked",{entryPoint:A,operation:"login",susiMethod:r.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:r.toLowerCase(),alternateUserSuggestionTargetUserId:a,alternateUserSuggestionSourceUserId:n}),e({variables:{userId:a,redirect:D,captchaValue:t}})};return u.createElement(u.Fragment,null,!y&&u.createElement(g.k,{callback:t,shouldExecuteRecaptcha:S}),n({handleSubmit:function(){return y?t(null):w(!0)}}))}))}},19608:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(67294),o=n(90174),i=n(4134),a=n(70146),l=n(37581),s=function(e){var t=e.actionUrl,n=e.token,s=e.userSocialLogins,c={actionUrl:t||"",operation:"login",token:n||"",targetUserId:s.userId,alternateUserSuggestion:!0};return r.createElement(l.$,{eventData:{operation:c.operation}},s.google?r.createElement(i.x,c):s.facebook?r.createElement(o.q,c):s.twitter?r.createElement(a.G,c):r.createElement(r.Fragment,null))}},27168:(e,t,n)=>{"use strict";n.d(t,{G:()=>g});var r=n(59713),o=n.n(r),i=n(46829),a=n(67294),l=n(70561),s=n(24087),c=n(66893),u=n(79316),d=n(27572),p=n(88914);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=function(e){var t=e.declineSuggestedAccount,n=e.isSocial,r=(0,l.v9)((function(e){return{hasRenderedAlternateUserBanner:e.navigation.hasRenderedAlternateUserBanner}}),l.wU).hasRenderedAlternateUserBanner,g=!!(0,c.P5)("enable_highlander_member_digest"),f=(0,d.hp)(),h=(0,l.I0)(),v=(0,i.useQuery)(s.e),E=v.loading,y=v.error,b=v.data,x=(b=void 0===b?{viewer:void 0}:b).viewer;if(E||y)return a.createElement(a.Fragment,null);var P=function(e){return e?a.createElement(u.rU,{onClick:function(){return S("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):a.createElement(a.Fragment,null,"Not you?"," ",a.createElement(u.rU,{onClick:function(){return S("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",a.createElement(u.rU,{onClick:function(){return S("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},S=function(e){var n="SIGNIN_OPTIONS"===e?"login":"register";t(),h((0,p.Pc)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:n,step:e},!!f&&{susiEntry:f})))};return g&&r?P(x):x?a.createElement(u.rU,{onClick:function(){return t()}},"Not me"):P(n)}},48881:(e,t,n)=>{"use strict";n.d(t,{o:()=>P});var r=n(28655),o=n.n(r),i=n(59713),a=n.n(i),l=n(63038),s=n.n(l),c=n(46829),u=n(71439),d=n(80439),p=n(67294),m=n(70561),g=n(24087),f=n(62630),h=n(27572),v=n(51512),E=n(33572);function y(){var e=o()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.children,n=e.postRenderCallback,r=(0,f.Av)(),o=(0,h.hp)(),i=(0,m.v9)((function(e){return{referrerSource:e.navigation.referrerSource,sessionUserId:e.session.user.id}}),m.wU),a=i.referrerSource,l=i.sessionUserId,u=(0,v.P7)(a||""),y=u.userId,b=u.name,P=p.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),w=s()(P,2),O=w[0],I=w[1];p.useEffect((function(){var e=O.shouldRun,t=O.showSuggestedAccount,r=O.userSocialLogins;e&&n(C,t,r)}),[O.shouldRun]);var R=(0,c.useQuery)(g.e),k=R.loading,A=R.error,D=R.data,C=(D=void 0===D?{viewer:void 0}:D).viewer;if(k||A)return p.createElement(p.Fragment,null);var j=!("email"!==b||C&&C.mediumMemberAt||!y);return j&&y?p.createElement(d.AE,{query:S,variables:{userId:y}},(function(e){var i=e.loading,a=e.error,s=e.data,c=(s=void 0===s?{}:s).userSocialLogins,u=!(i||a||!c||C&&!c.isMember||!c.facebook&&!c.google&&!c.twitter&&!c.redactedEmailAddress),d=x({loading:i,showSuggestedAccount:u},u&&{userSocialLogins:c,declineSuggestedAccount:function(){var e=(0,E.S)(c);r.event("susi.suggestNotYou",{entryPoint:o,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==c?void 0:c.userId,alternateUserSuggestionSourceUserId:C?C.id:l})}});return!n||i||O.shouldRun||I({shouldRun:!0,showSuggestedAccount:u,userSocialLogins:c}),t(d)})):(n&&!O.shouldRun&&I(x({},O,{shouldRun:!0})),t({showSuggestedAccount:j,loading:!1}))},S=(0,u.Ps)(y())},10886:(e,t,n)=>{"use strict";n.d(t,{Q:()=>R});var r=n(63038),o=n.n(r),i=n(67294),a=n(70561),l=n(51562),s=n(66893),c=n(9785),u=n(89714),d=n(37258),p=n(19608),m=n(27168),g=n(48881),f=n(59317),h=n(4709),v=n(98281),E=n(79316),y=n(80735),b=n(62630),x=n(27572),P=n(33572),S=n(60095),w=n(44556),O="alternate_user_top_banner",I=function(e){var t=e.userSocialLogins,n=(0,f.j)().openModal,r=!!(0,s.P5)("enable_new_susi_modal");return t.facebook||t.google||t.twitter?i.createElement(p.r,{userSocialLogins:t}):i.createElement(d.o,{onSuccess:function(){return n({step:"CHECK_YOUR_INBOX",operation:r?"register":"login",susiEntry:O})},userId:t.userId},(function(e){var t=e.handleSubmit;return i.createElement(E.zx,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")}))},R=function(){var e=(0,c.YC)().value,t=(0,a.v9)((function(e){return e.session.user.id})),n=(0,a.I0)(),r=(0,b.Av)(),d=!!(0,s.P5)("enable_highlander_member_digest"),p=i.useState(!1),f=o()(p,2),R=f[0],k=f[1],A=i.useState("loading"),D=o()(A,2),C=D[0],j=D[1];return i.useEffect((function(){n((0,w.e6)(!0)),k(!0)}),[]),i.useEffect((function(){"rendered"===C&&n((0,S.T)(!0)),"not_eligible"===C&&n((0,w.e6)(!1))}),[C]),i.createElement(x.cW,{source:{susiEntry:O}},i.createElement(g.o,{postRenderCallback:function(e,n,o){j(n?"rendered":"not_eligible"),n&&(r.event("experiment.eligible",{experimentId:"358323e239a2"}),d&&r.event("alternateUserBanner.viewed",{alternateUserSuggestionAccountType:(0,P.S)(o),alternateUserSuggestionTargetUserId:o.userId,alternateUserSuggestionSourceUserId:e?e.id:t}))}},(function(n){var o,a=n.showSuggestedAccount,s=n.declineSuggestedAccount,c=n.userSocialLogins;return d&&R&&a&&s&&c?i.createElement(u.N8,null,i.createElement(h.Y,{onClose:function(){return r.event("alternateUserBanner.dismissed",{alternateUserSuggestionAccountType:(0,P.S)(c),alternateUserSuggestionTargetUserId:c.userId,alternateUserSuggestionSourceUserId:e?e.id:t})}},i.createElement(E.xu,{alignItems:"flex-start",display:"flex",flexDirection:"column",sm:{alignItems:"center"}},i.createElement(E.xu,{alignItems:"center",display:"flex",marginBottom:"21px",sm:{flexDirection:"column",margin:"0 21px 21px",textAlign:"center"}},!e&&(null===(o=c.userAvatar)||void 0===o?void 0:o.imageId)&&i.createElement(E.xu,{display:"flex",marginRight:"20px",sm:{marginBottom:"18px",marginRight:"0"}},i.createElement(v.ZP,{scale:"S",user:c.userAvatar})),i.createElement(l.W,{featureString:"alternate-user-top-banner",target:"header"},i.createElement(y.F,{color:"DARKER",scale:"M"},function(e,t){var n=t.isMember,r=t.redactedEmailAddress;return i.createElement(i.Fragment,null,e?"Switch":"Sign in"," to your ",n?"member ":"","account (",i.createElement("b",null,r),") for",n?" unlimited access":" your personalized experience",".")}(e,c)))),i.createElement(E.xu,{alignItems:"center",display:"flex",sm:{flexDirection:"column"}},i.createElement(I,{userSocialLogins:c}),i.createElement(E.xu,{margin:"0 12px",sm:{margin:"24px 0 0"}},i.createElement(m.G,{declineSuggestedAccount:s,isSocial:!!(c.facebook||c.google||c.twitter)})))))):i.createElement(i.Fragment,null)})))}},94937:(e,t,n)=>{"use strict";n.d(t,{b:()=>O});var r=n(87757),o=n.n(r),i=n(63038),a=n.n(i),l=n(46829),s=n(67294),c=n(70561),u=n(51562),d=n(24087),p=n(66893),m=n(89714),g=n(59317),f=n(4709),h=n(98281),v=n(79316),E=n(80735),y=n(62630),b=n(27572),x=n(51512),P=n(11348),S=n(6522),w="signin_confirmation_banner",O=function(){var e=(0,y.Av)(),t=(0,g.j)().openModal,n=!!(0,p.P5)("enable_confirm_sign_in"),r=!!(0,p.P5)("enable_new_susi_modal"),i=s.useState(!1),O=a()(i,2),I=O[0],R=O[1],k=s.useState(!1),A=a()(k,2),D=A[0],C=A[1],j=s.useState(!0),T=a()(j,2),_=T[0],B=T[1],M=(0,l.useQuery)(d.e).data,U=(M=void 0===M?{viewer:void 0}:M).viewer,L=(0,c.v9)((function(e){return{referrerSource:e.navigation.referrerSource,xsrf:e.session.xsrf}}),c.wU),N=L.referrerSource,F=L.xsrf,W=(0,x.P7)(N||"").name;return s.useEffect((function(){return R(!0)}),[]),s.useEffect((function(){var t;I&&U&&(e.event("experiment.eligible",{experimentId:"b4152480e71c"}),o().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().awrap((0,P.vA)(null==U?void 0:U.id,F));case 2:t=e.sent,B(t);case 4:case"end":return e.stop()}})),n&&(0,P.oy)(U.id,F))}),[I]),s.useEffect((function(){D&&n&&e.event("signInConfirmationBanner.viewed",{})}),[D]),!(n&&I&&U&&W&&"login"===W&&U.createdAt)||Date.now()-U.createdAt<=5*S.uD||_?null:(D||C(!0),s.createElement(b.cW,{source:{susiEntry:w},extendSource:!0},s.createElement(m.N8,null,s.createElement(f.Y,{onClose:function(){return e.event("signInConfirmationBanner.dismissed",{})}},s.createElement(v.xu,{display:"flex",alignItems:"center"},s.createElement(v.xu,{display:"none",marginRight:"20px",sm:{display:"flex"}},s.createElement(h.ZP,{scale:"S",user:U})),s.createElement(E.F,{color:"DARKER",scale:"M"},s.createElement(u.W,{featureString:"confirm-sign-in-banner",target:"header",tag:"span"},"Welcome back. You are signed"," ",U.mediumMemberAt?"into your member account ":"in as ",s.createElement("b",null,U.email),"."," "),s.createElement(v.rU,{onClick:function(){e.event("signInConfirmationBanner.notYouClicked",{}),t({operation:r?"register":"login",step:"SIGNIN_OPTIONS",susiEntry:w})},linkStyle:"OBVIOUS"},"Not you?")))))))}},4709:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(67294),o=n(28859),i=n(79316),a=function(e){var t=e.children,n=e.onClose,a=r.useRef(null),l=r.useContext(o.u6).updateWatchedBounds;return r.createElement(i.Bn,{initialVisibility:!0},(function(e){var o=e.isVisible,s=e.hide;return o&&r.createElement(i.xu,{backgroundColor:"BASE_LIGHT",borderBottom:"BASE_LIGHTER",borderTop:"BASE_LIGHTER"},r.createElement(i.Pm,null,r.createElement(i.xu,{display:"flex",justifyContent:"space-between",paddingBottom:"20px",paddingTop:"20px"},t,r.createElement(i.PZ,{onClick:function(){n&&n(),l("byline",a,{type:"header"}),s()},isPositionAbsolute:!1,size:"REGULAR"}))))}))}},33572:(e,t,n)=>{"use strict";function r(e){if((e.match(/ /g)||[]).length>1)return"";var t=e.indexOf(" ");return e.substring(0,t)}function o(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}n.d(t,{J:()=>r,S:()=>o})}}]);
//# sourceMappingURL=6983.a04b5540.chunk.js.map